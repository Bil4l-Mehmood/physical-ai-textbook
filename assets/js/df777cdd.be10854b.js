"use strict";(self.webpackChunkphysical_ai_textbook=self.webpackChunkphysical_ai_textbook||[]).push([[509],{8453:function(e,n,r){r.d(n,{R:function(){return t},x:function(){return l}});var i=r(6540);const s={},o=i.createContext(s);function t(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(o.Provider,{value:n},e.children)}},8680:function(e,n,r){r.r(n),r.d(n,{assets:function(){return a},contentTitle:function(){return l},default:function(){return h},frontMatter:function(){return t},metadata:function(){return i},toc:function(){return c}});var i=JSON.parse('{"id":"chapter-2/2-1-gazebo-fundamentals","title":"Gazebo Simulation: Building Digital Twins","description":"Learn to simulate robots in Gazebo with physics, collision detection, and realistic environment simulation","source":"@site/docs/chapter-2/2-1-gazebo-fundamentals.md","sourceDirName":"chapter-2","slug":"/chapter-2/2-1-gazebo-fundamentals","permalink":"/physical-ai-textbook/docs/chapter-2/2-1-gazebo-fundamentals","draft":false,"unlisted":false,"editUrl":"https://github.com/Bil4l-Mehmood/physical-ai-textbook/edit/main/docs/chapter-2/2-1-gazebo-fundamentals.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"sidebar_label":"Lesson 2.1: Gazebo Fundamentals","title":"Gazebo Simulation: Building Digital Twins","description":"Learn to simulate robots in Gazebo with physics, collision detection, and realistic environment simulation","duration":90,"difficulty":"Intermediate","hardware":["Ubuntu 22.04 LTS","ROS 2 Humble","Gazebo Harmonic (recommended)"],"prerequisites":["Lesson 1.4: URDF/XACRO Basics"]},"sidebar":"tutorialSidebar","previous":{"title":"Lesson 1.4: URDF/XACRO Basics","permalink":"/physical-ai-textbook/docs/chapter-1/1-4-urdf-xacro"},"next":{"title":"Lesson 2.2: URDF/SDF & Physics","permalink":"/physical-ai-textbook/docs/chapter-2/2-2-urdf-sdf-physics"}}'),s=r(4848),o=r(8453);const t={sidebar_position:1,sidebar_label:"Lesson 2.1: Gazebo Fundamentals",title:"Gazebo Simulation: Building Digital Twins",description:"Learn to simulate robots in Gazebo with physics, collision detection, and realistic environment simulation",duration:90,difficulty:"Intermediate",hardware:["Ubuntu 22.04 LTS","ROS 2 Humble","Gazebo Harmonic (recommended)"],prerequisites:["Lesson 1.4: URDF/XACRO Basics"]},l="Lesson 2.1: Gazebo Simulation Fundamentals",a={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Hardware &amp; Prerequisites",id:"hardware--prerequisites",level:2},{value:"Part 1: Gazebo Architecture &amp; Concepts",id:"part-1-gazebo-architecture--concepts",level:2},{value:"Gazebo vs Other Simulators",id:"gazebo-vs-other-simulators",level:3},{value:"Gazebo Terminology",id:"gazebo-terminology",level:3},{value:"Part 2: Installation &amp; Setup",id:"part-2-installation--setup",level:2},{value:"Step 1: Install Gazebo",id:"step-1-install-gazebo",level:3},{value:"Step 2: Verify ROS 2 Integration",id:"step-2-verify-ros-2-integration",level:3},{value:"Step 3: Create Gazebo Workspace",id:"step-3-create-gazebo-workspace",level:3},{value:"Step 4: Test Gazebo Launch",id:"step-4-test-gazebo-launch",level:3},{value:"Part 3: Simulation Description Format (SDF)",id:"part-3-simulation-description-format-sdf",level:2},{value:"SDF World File Structure",id:"sdf-world-file-structure",level:3},{value:"Key SDF Elements Explained",id:"key-sdf-elements-explained",level:3},{value:"Part 4: Loading Robots into Gazebo",id:"part-4-loading-robots-into-gazebo",level:2},{value:"Method 1: Using ROS 2 Launch File",id:"method-1-using-ros-2-launch-file",level:3},{value:"Method 2: Direct SDF Loading",id:"method-2-direct-sdf-loading",level:3},{value:"Launching Gazebo with Robot",id:"launching-gazebo-with-robot",level:3},{value:"Part 5: Physics Simulation &amp; Control",id:"part-5-physics-simulation--control",level:2},{value:"Controlling Robot Joints",id:"controlling-robot-joints",level:3},{value:"Monitoring Simulation State",id:"monitoring-simulation-state",level:3},{value:"Physics Tuning Parameters",id:"physics-tuning-parameters",level:3},{value:"Hands-On Exercise",id:"hands-on-exercise",level:2},{value:"Step 1: Setup Environment",id:"step-1-setup-environment",level:3},{value:"Step 2: Launch Gazebo",id:"step-2-launch-gazebo",level:3},{value:"Step 3: Verify Robot Loads",id:"step-3-verify-robot-loads",level:3},{value:"Step 4: Observe Physics Behavior",id:"step-4-observe-physics-behavior",level:3},{value:"Exercises",id:"exercises",level:3},{value:"Common Errors &amp; Fixes",id:"common-errors--fixes",level:2},{value:"Key Takeaways",id:"key-takeaways",level:2},{value:"Further Reading",id:"further-reading",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"lesson-21-gazebo-simulation-fundamentals",children:"Lesson 2.1: Gazebo Simulation Fundamentals"})}),"\n",(0,s.jsxs)(n.admonition,{title:"Lesson Overview",type:"info",children:[(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Duration"}),": 90 minutes | ",(0,s.jsx)(n.strong,{children:"Difficulty"}),": Intermediate | ",(0,s.jsx)(n.strong,{children:"Hardware"}),": Ubuntu 22.04 + ROS 2 Humble + Gazebo"]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Prerequisites"}),": Complete Lesson 1.4 (URDF/XACRO Basics)"]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Learning Outcome"}),": Build and simulate robots in Gazebo with physics, sensors, and realistic environments"]})]}),"\n",(0,s.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,s.jsx)(n.p,{children:"By the end of this lesson, you will be able to:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Understand Gazebo architecture and simulation concepts"}),"\n",(0,s.jsx)(n.li,{children:"Install Gazebo Harmonic with ROS 2 Humble integration"}),"\n",(0,s.jsx)(n.li,{children:"Create and configure 3D simulation environments"}),"\n",(0,s.jsx)(n.li,{children:"Load URDF robots into Gazebo with physics simulation"}),"\n",(0,s.jsx)(n.li,{children:"Configure gravity, friction, and collision dynamics"}),"\n",(0,s.jsx)(n.li,{children:"Simulate basic robot movement and interaction"}),"\n",(0,s.jsx)(n.li,{children:"Monitor simulation state with ROS 2 topics"}),"\n",(0,s.jsx)(n.li,{children:"Debug simulation issues and optimize performance"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"hardware--prerequisites",children:"Hardware & Prerequisites"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Required"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Ubuntu 22.04 LTS (native or VM with 8GB+ RAM)"}),"\n",(0,s.jsx)(n.li,{children:"ROS 2 Humble installed and sourced"}),"\n",(0,s.jsx)(n.li,{children:"URDF robots from Lesson 1.4 (simple_robot.urdf)"}),"\n",(0,s.jsx)(n.li,{children:"Text editor (VS Code recommended)"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Optional (for visualization)"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Monitor with GPU support (RTX-capable machine for RTX rendering)"}),"\n",(0,s.jsx)(n.li,{children:"2 displays (one for Gazebo, one for monitoring)"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Verification"}),": Confirm prerequisites"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 --version\r\ncat /etc/os-release | grep PRETTY_NAME  # Ubuntu 22.04\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"part-1-gazebo-architecture--concepts",children:"Part 1: Gazebo Architecture & Concepts"}),"\n",(0,s.jsxs)(n.admonition,{title:"What is Gazebo?",type:"tip",children:[(0,s.jsxs)(n.p,{children:["Gazebo is an open-source ",(0,s.jsx)(n.strong,{children:"physics simulator"})," for robotics:"]}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Simulates ",(0,s.jsx)(n.strong,{children:"rigid body dynamics"})," (gravity, friction, collisions)"]}),"\n",(0,s.jsxs)(n.li,{children:["Models ",(0,s.jsx)(n.strong,{children:"sensors"})," (cameras, lidars, IMUs, contact sensors)"]}),"\n",(0,s.jsxs)(n.li,{children:["Provides ",(0,s.jsx)(n.strong,{children:"3D visualization"})," and interactive environment control"]}),"\n",(0,s.jsxs)(n.li,{children:["Integrates seamlessly with ",(0,s.jsx)(n.strong,{children:"ROS 2"})," for robot control"]}),"\n",(0,s.jsxs)(n.li,{children:["Offers both ",(0,s.jsx)(n.strong,{children:"classical physics"})," (ODE) and ",(0,s.jsx)(n.strong,{children:"modern physics"})," (Bullet, DART)"]}),"\n"]})]}),"\n",(0,s.jsx)(n.h3,{id:"gazebo-vs-other-simulators",children:"Gazebo vs Other Simulators"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Feature"}),(0,s.jsx)(n.th,{children:"Gazebo"}),(0,s.jsx)(n.th,{children:"V-REP"}),(0,s.jsx)(n.th,{children:"Webots"}),(0,s.jsx)(n.th,{children:"CoppeliaSim"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"ROS 2 Integration"})}),(0,s.jsx)(n.td,{children:"\u2705 Native"}),(0,s.jsx)(n.td,{children:"\u26a0\ufe0f Limited"}),(0,s.jsx)(n.td,{children:"\u26a0\ufe0f Limited"}),(0,s.jsx)(n.td,{children:"\u2705 Good"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Physics Engine"})}),(0,s.jsx)(n.td,{children:"\u2705 Multiple"}),(0,s.jsx)(n.td,{children:"\u2705 Multiple"}),(0,s.jsx)(n.td,{children:"\u2705 Built-in"}),(0,s.jsx)(n.td,{children:"\u2705 Built-in"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Open Source"})}),(0,s.jsx)(n.td,{children:"\u2705 Yes"}),(0,s.jsx)(n.td,{children:"\u274c No"}),(0,s.jsx)(n.td,{children:"\u274c No"}),(0,s.jsx)(n.td,{children:"\u2705 Yes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Humanoid Support"})}),(0,s.jsx)(n.td,{children:"\u2705 Excellent"}),(0,s.jsx)(n.td,{children:"\u2705 Good"}),(0,s.jsx)(n.td,{children:"\u2705 Good"}),(0,s.jsx)(n.td,{children:"\u2705 Good"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Learning Curve"})}),(0,s.jsx)(n.td,{children:"\u26a0\ufe0f Steep"}),(0,s.jsx)(n.td,{children:"\u2705 Easy"}),(0,s.jsx)(n.td,{children:"\u2705 Easy"}),(0,s.jsx)(n.td,{children:"\u2705 Easy"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Why Gazebo for this course"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"100% ROS 2 compatible"}),"\n",(0,s.jsx)(n.li,{children:"Industry standard for humanoid research"}),"\n",(0,s.jsx)(n.li,{children:"Extensive URDF support"}),"\n",(0,s.jsx)(n.li,{children:"Free and open-source"}),"\n",(0,s.jsx)(n.li,{children:"Active community with excellent documentation"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"gazebo-terminology",children:"Gazebo Terminology"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"World"}),": The complete simulation environment (buildings, ground, robots)"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Model"}),": A robot or object in the simulation (URDF converted to SDF)"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Link"}),": A rigid body within a model (from URDF ",(0,s.jsx)(n.code,{children:"<link>"}),")"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Joint"}),": A connection between links (from URDF ",(0,s.jsx)(n.code,{children:"<joint>"}),")"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Sensor"}),": A device that generates data (camera, lidar, IMU)"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Plugin"}),": A dynamic library that extends Gazebo functionality"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Physics Engine"}),": The solver for rigid body dynamics (ODE, Bullet, DART, TPE)"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"part-2-installation--setup",children:"Part 2: Installation & Setup"}),"\n",(0,s.jsx)(n.h3,{id:"step-1-install-gazebo",children:"Step 1: Install Gazebo"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Update package list\r\nsudo apt update\r\n\r\n# Install Gazebo Harmonic (latest version)\r\nsudo apt install gazebo-harmonic\r\n\r\n# Install ROS 2 Gazebo bridge\r\nsudo apt install ros-humble-gazebo-ros-pkgs\r\n\r\n# Verify installation\r\ngazebo --version\r\n\r\n# Expected output:\r\n# Gazebo version 8.0.0\n"})}),"\n",(0,s.jsx)(n.h3,{id:"step-2-verify-ros-2-integration",children:"Step 2: Verify ROS 2 Integration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Source ROS 2 environment\r\nsource /opt/ros/humble/setup.bash\r\n\r\n# Check if gazebo_ros package is available\r\nros2 pkg list | grep gazebo\r\n\r\n# Expected output should show:\r\n# gazebo_ros\r\n# gazebo_plugins\r\n# gazebo_ros2_control\n"})}),"\n",(0,s.jsx)(n.h3,{id:"step-3-create-gazebo-workspace",children:"Step 3: Create Gazebo Workspace"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Create workspace\r\nmkdir -p ~/gazebo_ws/src\r\ncd ~/gazebo_ws\r\n\r\n# Source ROS 2 and add to bashrc\r\necho 'source /opt/ros/humble/setup.bash' >> ~/.bashrc\r\nsource ~/.bashrc\r\n\r\n# Verify workspace\r\necho $ROS_DISTRO  # Should output: humble\n"})}),"\n",(0,s.jsx)(n.h3,{id:"step-4-test-gazebo-launch",children:"Step 4: Test Gazebo Launch"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Terminal 1: Launch an empty Gazebo world\r\nros2 launch gazebo_ros empty_world.launch.py\r\n\r\n# Terminal 2: Verify Gazebo is running\r\nros2 topic list | grep gazebo\r\n\r\n# Expected topics:\r\n# /clock\r\n# /gazebo/model_states\r\n# /gazebo/set_entity_state\r\n# /gazebo/get_entity_state\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"part-3-simulation-description-format-sdf",children:"Part 3: Simulation Description Format (SDF)"}),"\n",(0,s.jsx)(n.admonition,{title:"SDF vs URDF",type:"note",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"URDF"}),": Description for visualization and ROS 2 (from Lesson 1.4)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"SDF"}),": Simulation-specific format with physics, sensors, and plugins"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Relationship"}),": URDF is converted to SDF when loaded into Gazebo"]}),"\n"]})}),"\n",(0,s.jsx)(n.h3,{id:"sdf-world-file-structure",children:"SDF World File Structure"}),"\n",(0,s.jsxs)(n.p,{children:["Create ",(0,s.jsx)(n.code,{children:"gazebo_ws/src/worlds/simple_world.sdf"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" ?>\r\n\x3c!-- Copyright (c) 2025 Physical AI Course\r\n     License: MIT\r\n     Target: Ubuntu 22.04 + ROS 2 Humble + Gazebo\r\n--\x3e\r\n<sdf version="1.10">\r\n  <world name="simple_world">\r\n\r\n    \x3c!-- Physics configuration --\x3e\r\n    <physics name="physics" type="ode">\r\n      <max_step_size>0.001</max_step_size>\r\n      <real_time_factor>1.0</real_time_factor>\r\n      <real_time_update_rate>1000</real_time_update_rate>\r\n      <gravity>0 0 -9.81</gravity>\r\n      <ode>\r\n        <solver>\r\n          <type>quick</type>\r\n          <iters>50</iters>\r\n          <precon_iters>0</precon_iters>\r\n          <sor>1.400000</sor>\r\n        </solver>\r\n        <constraints>\r\n          <cfm>0.000000</cfm>\r\n          <erp>0.200000</erp>\r\n          <contact_max_correcting_vel>100.000000</contact_max_correcting_vel>\r\n          <contact_surface_layer>0.001000</contact_surface_layer>\r\n        </constraints>\r\n      </ode>\r\n    </physics>\r\n\r\n    \x3c!-- Light source --\x3e\r\n    <light name="sun" type="directional">\r\n      <cast_shadows>true</cast_shadows>\r\n      <pose>0 0 10 0 0 0</pose>\r\n      <diffuse>0.8 0.8 0.8 1</diffuse>\r\n      <specular>0.8 0.8 0.8 1</specular>\r\n      <attenuation>\r\n        <range>1000</range>\r\n        <constant>0.9</constant>\r\n        <linear>0.01</linear>\r\n        <quadratic>0.001</quadratic>\r\n      </attenuation>\r\n      <direction>-0.5 0.1 -0.9</direction>\r\n    </light>\r\n\r\n    \x3c!-- Ground plane --\x3e\r\n    <model name="ground_plane">\r\n      <static>true</static>\r\n      <link name="link">\r\n        <collision name="collision">\r\n          <geometry>\r\n            <plane>\r\n              <normal>0 0 1</normal>\r\n              <size>100 100</size>\r\n            </plane>\r\n          </geometry>\r\n          <surface>\r\n            <friction>\r\n              <ode>\r\n                <mu>0.6</mu>\r\n                <mu2>0.6</mu2>\r\n              </ode>\r\n            </friction>\r\n          </surface>\r\n        </collision>\r\n        <visual name="visual">\r\n          <geometry>\r\n            <plane>\r\n              <normal>0 0 1</normal>\r\n              <size>100 100</size>\r\n            </plane>\r\n          </geometry>\r\n          <material>\r\n            <ambient>0.8 0.8 0.8 1</ambient>\r\n            <diffuse>0.8 0.8 0.8 1</diffuse>\r\n            <specular>0.8 0.8 0.8 1</specular>\r\n          </material>\r\n        </visual>\r\n      </link>\r\n    </model>\r\n\r\n  </world>\r\n</sdf>\n'})}),"\n",(0,s.jsx)(n.h3,{id:"key-sdf-elements-explained",children:"Key SDF Elements Explained"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"<physics>"})}),": Simulation parameters"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"max_step_size"}),": Time step for physics calculations (0.001 = 1ms)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"real_time_factor"}),": 1.0 = real-time, 2.0 = 2x faster"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"gravity"}),": Earth gravity = (0, 0, -9.81) m/s\xb2"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"<light>"})}),": Illumination for visualization"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"directional"}),": Sun-like light"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"pose"}),": Position and orientation (x, y, z, roll, pitch, yaw)"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"<collision>"})}),": Physics interaction geometry"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Used for collision detection and contact forces"}),"\n",(0,s.jsxs)(n.li,{children:["Often matches ",(0,s.jsx)(n.code,{children:"<visual>"})," but can be simplified for performance"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"<friction>"})}),": Material properties"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"mu"}),": Coefficient of friction"]}),"\n",(0,s.jsx)(n.li,{children:"Critical for walking, grasping, and sliding"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"part-4-loading-robots-into-gazebo",children:"Part 4: Loading Robots into Gazebo"}),"\n",(0,s.jsx)(n.h3,{id:"method-1-using-ros-2-launch-file",children:"Method 1: Using ROS 2 Launch File"}),"\n",(0,s.jsxs)(n.p,{children:["Create ",(0,s.jsx)(n.code,{children:"gazebo_ws/src/launch/gazebo_robot.launch.py"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\r\n# Copyright (c) 2025 Physical AI Course\r\n# License: MIT\r\n# Target: Ubuntu 22.04 + ROS 2 Humble + Gazebo\r\n\r\nimport os\r\nfrom ament_index_python.packages import get_package_share_directory\r\nfrom launch import LaunchDescription\r\nfrom launch.actions import IncludeLaunchDescription\r\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\r\nfrom launch_ros.actions import Node\r\n\r\n\r\ndef generate_launch_description():\r\n    \"\"\"\r\n    Launch Gazebo with a robot loaded from URDF.\r\n\r\n    This launch file:\r\n    1. Starts Gazebo simulator\r\n    2. Loads a robot URDF into the simulation\r\n    3. Spawns necessary ROS 2 nodes for robot control\r\n    \"\"\"\r\n\r\n    # Get path to URDF file\r\n    urdf_file = os.path.join(\r\n        os.path.expanduser('~'),\r\n        'gazebo_ws', 'src', 'urdf', 'simple_robot.urdf'\r\n    )\r\n\r\n    # Read URDF content as string\r\n    with open(urdf_file, 'r') as f:\r\n        robot_description = f.read()\r\n\r\n    # Start Gazebo with empty world\r\n    gazebo = IncludeLaunchDescription(\r\n        PythonLaunchDescriptionSource(\r\n            os.path.join(\r\n                get_package_share_directory('gazebo_ros'),\r\n                'launch',\r\n                'gazebo.launch.py'\r\n            )\r\n        )\r\n    )\r\n\r\n    # Spawn robot into Gazebo\r\n    spawn_robot = Node(\r\n        package='gazebo_ros',\r\n        executable='spawn_entity.py',\r\n        arguments=[\r\n            '-topic', 'robot_description',\r\n            '-entity', 'simple_robot',\r\n            '-x', '0.0',\r\n            '-y', '0.0',\r\n            '-z', '0.5'  # Start 0.5m above ground\r\n        ],\r\n        output='screen'\r\n    )\r\n\r\n    # Publish robot description\r\n    robot_state_publisher = Node(\r\n        package='robot_state_publisher',\r\n        executable='robot_state_publisher',\r\n        parameters=[{'robot_description': robot_description}],\r\n        output='screen'\r\n    )\r\n\r\n    return LaunchDescription([\r\n        gazebo,\r\n        robot_state_publisher,\r\n        spawn_robot,\r\n    ])\n"})}),"\n",(0,s.jsx)(n.h3,{id:"method-2-direct-sdf-loading",children:"Method 2: Direct SDF Loading"}),"\n",(0,s.jsx)(n.p,{children:"Add robot model to SDF world file:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Add this inside <world> in simple_world.sdf --\x3e\r\n<model name="simple_robot">\r\n  <pose>0 0 0.5 0 0 0</pose>\r\n  \x3c!-- Convert URDF to SDF and include here --\x3e\r\n  <link name="base_link">\r\n    \x3c!-- ... link definition ... --\x3e\r\n  </link>\r\n  <joint name="joint_1">\r\n    \x3c!-- ... joint definition ... --\x3e\r\n  </joint>\r\n</model>\n'})}),"\n",(0,s.jsx)(n.h3,{id:"launching-gazebo-with-robot",children:"Launching Gazebo with Robot"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Create URDF directory\r\nmkdir -p ~/gazebo_ws/src/urdf\r\nmkdir -p ~/gazebo_ws/src/launch\r\n\r\n# Copy robot URDF from Chapter 1\r\ncp ~/ai_robotics/chapter_1/simple_robot.urdf ~/gazebo_ws/src/urdf/\r\n\r\n# Make launch file executable\r\nchmod +x ~/gazebo_ws/src/launch/gazebo_robot.launch.py\r\n\r\n# Source ROS 2\r\nsource /opt/ros/humble/setup.bash\r\n\r\n# Launch Gazebo with robot\r\nros2 launch ~/gazebo_ws/src/launch/gazebo_robot.launch.py\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Expected Output"}),":"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Gazebo window opens with empty world"}),"\n",(0,s.jsx)(n.li,{children:"Robot appears at coordinates (0, 0, 0.5)"}),"\n",(0,s.jsx)(n.li,{children:"Robot drops to ground due to gravity"}),"\n",(0,s.jsx)(n.li,{children:"ROS 2 topics appear for robot control"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"part-5-physics-simulation--control",children:"Part 5: Physics Simulation & Control"}),"\n",(0,s.jsx)(n.h3,{id:"controlling-robot-joints",children:"Controlling Robot Joints"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'#!/usr/bin/env python3\r\n"""\r\nRobot Control via Gazebo Joint Commands\r\nControl joints by publishing to gazebo_ros2_control topics\r\n"""\r\n\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import Float64MultiArray\r\nimport time\r\n\r\n\r\nclass RobotController(Node):\r\n    """Send joint commands to Gazebo simulated robot"""\r\n\r\n    def __init__(self):\r\n        super().__init__(\'robot_controller\')\r\n\r\n        # Publisher for joint commands\r\n        self.joint_command_pub = self.create_publisher(\r\n            Float64MultiArray,\r\n            \'/simple_robot_controller/commands\',\r\n            10\r\n        )\r\n\r\n        self.get_logger().info(\'Robot controller initialized\')\r\n\r\n    def send_joint_command(self, joint_positions):\r\n        """\r\n        Send position commands to all joints\r\n\r\n        Args:\r\n            joint_positions: List of target angles [joint_1, joint_2, ...]\r\n        """\r\n        msg = Float64MultiArray()\r\n        msg.data = joint_positions\r\n        self.joint_command_pub.publish(msg)\r\n        self.get_logger().info(f\'Sent joint command: {joint_positions}\')\r\n\r\n    def wave_motion(self):\r\n        """Make robot wave (oscillate joint 1)"""\r\n        self.get_logger().info(\'Starting wave motion...\')\r\n\r\n        for cycle in range(3):  # 3 complete waves\r\n            # Move joint 1 to +90 degrees\r\n            self.send_joint_command([1.57, 0.0])  # +90\xb0, 0\xb0\r\n            time.sleep(1.0)\r\n\r\n            # Move joint 1 to -90 degrees\r\n            self.send_joint_command([-1.57, 0.0])  # -90\xb0, 0\xb0\r\n            time.sleep(1.0)\r\n\r\n        # Return to neutral\r\n        self.send_joint_command([0.0, 0.0])\r\n        self.get_logger().info(\'Wave motion complete\')\r\n\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    controller = RobotController()\r\n\r\n    # Wait for Gazebo to fully load\r\n    time.sleep(3)\r\n\r\n    # Execute wave motion\r\n    controller.wave_motion()\r\n\r\n    controller.destroy_node()\r\n    rclpy.shutdown()\r\n\r\n\r\nif __name__ == \'__main__\':\r\n    main()\n'})}),"\n",(0,s.jsx)(n.h3,{id:"monitoring-simulation-state",children:"Monitoring Simulation State"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Terminal 1: Launch Gazebo with robot\r\nros2 launch ~/gazebo_ws/src/launch/gazebo_robot.launch.py\r\n\r\n# Terminal 2: Monitor robot state topics\r\nros2 topic list | grep gazebo\r\n\r\n# View model positions\r\nros2 topic echo /gazebo/model_states\r\n\r\n# View link states\r\nros2 topic echo /gazebo/link_states\r\n\r\n# Monitor joint states\r\nros2 topic echo /joint_states\n"})}),"\n",(0,s.jsx)(n.h3,{id:"physics-tuning-parameters",children:"Physics Tuning Parameters"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{children:"Effect"}),(0,s.jsx)(n.th,{children:"Typical Value"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"gravity"})}),(0,s.jsx)(n.td,{children:"Acceleration due to gravity"}),(0,s.jsx)(n.td,{children:"-9.81 m/s\xb2 (down)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"max_step_size"})}),(0,s.jsx)(n.td,{children:"Physics simulation timestep"}),(0,s.jsx)(n.td,{children:"0.001 s (1 ms)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.strong,{children:"mu"})," (friction)"]}),(0,s.jsx)(n.td,{children:"Static friction coefficient"}),(0,s.jsx)(n.td,{children:"0.6 (rubber on concrete)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"erp"})}),(0,s.jsx)(n.td,{children:"Error Reduction Parameter"}),(0,s.jsx)(n.td,{children:"0.2 (stability vs. accuracy)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"cfm"})}),(0,s.jsx)(n.td,{children:"Constraint Force Mixing"}),(0,s.jsx)(n.td,{children:"0.0 (stiffer constraints)"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"hands-on-exercise",children:"Hands-On Exercise"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Task"}),": Create a Gazebo simulation with a robot and observe physics behavior."]}),"\n",(0,s.jsx)(n.h3,{id:"step-1-setup-environment",children:"Step 1: Setup Environment"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Create workspace structure\r\nmkdir -p ~/gazebo_ws/src/{urdf,launch,src,worlds}\r\ncd ~/gazebo_ws/src\r\n\r\n# Copy robot URDF from Chapter 1\r\ncp ~/ai_robotics/chapter_1/simple_robot.urdf urdf/\r\n\r\n# Copy world file\r\ncat > worlds/physics_test.sdf << \'EOF\'\r\n<?xml version="1.0" ?>\r\n<sdf version="1.10">\r\n  <world name="physics_test">\r\n    <physics name="physics" type="ode">\r\n      <max_step_size>0.001</max_step_size>\r\n      <real_time_factor>1.0</real_time_factor>\r\n      <real_time_update_rate>1000</real_time_update_rate>\r\n      <gravity>0 0 -9.81</gravity>\r\n    </physics>\r\n    <light name="sun" type="directional">\r\n      <pose>0 0 10 0 0 0</pose>\r\n      <diffuse>0.8 0.8 0.8 1</diffuse>\r\n      <specular>0.8 0.8 0.8 1</specular>\r\n    </light>\r\n    <model name="ground_plane">\r\n      <static>true</static>\r\n      <link name="link">\r\n        <collision name="collision">\r\n          <geometry>\r\n            <plane>\r\n              <normal>0 0 1</normal>\r\n              <size>100 100</size>\r\n            </plane>\r\n          </geometry>\r\n        </collision>\r\n        <visual name="visual">\r\n          <geometry>\r\n            <plane>\r\n              <normal>0 0 1</normal>\r\n              <size>100 100</size>\r\n            </plane>\r\n          </geometry>\r\n          <material>\r\n            <ambient>0.8 0.8 0.8 1</ambient>\r\n            <diffuse>0.8 0.8 0.8 1</diffuse>\r\n          </material>\r\n        </visual>\r\n      </link>\r\n    </model>\r\n  </world>\r\n</sdf>\r\nEOF\n'})}),"\n",(0,s.jsx)(n.h3,{id:"step-2-launch-gazebo",children:"Step 2: Launch Gazebo"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"source /opt/ros/humble/setup.bash\r\n\r\n# Launch with custom world\r\nros2 launch gazebo_ros gazebo.launch.py world:=$HOME/gazebo_ws/src/worlds/physics_test.sdf\n"})}),"\n",(0,s.jsx)(n.h3,{id:"step-3-verify-robot-loads",children:"Step 3: Verify Robot Loads"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# In another terminal\r\nros2 service list | grep gazebo\r\n\r\n# Get model state\r\nros2 service call /gazebo/get_entity_state gazebo_msgs/GetEntityState \"name: 'simple_robot'\"\n"})}),"\n",(0,s.jsx)(n.h3,{id:"step-4-observe-physics-behavior",children:"Step 4: Observe Physics Behavior"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u2705 Robot falls from spawn point due to gravity"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Robot collides with ground and stops"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 No penetration through ground plane"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Contact forces visible in simulation"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"exercises",children:"Exercises"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Gravity Experiment"}),": Modify world SDF to have 0 gravity and observe robot floating"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Friction Test"}),": Change ground friction from 0.6 to 0.1 and observe sliding behavior"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Timestep Impact"}),": Change max_step_size from 0.001 to 0.01 and observe stability"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Real-time Factor"}),": Set real_time_factor to 2.0 and observe simulation speed increase"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Multiple Objects"}),": Add a ball (sphere) model to the world and watch it interact with robot"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"common-errors--fixes",children:"Common Errors & Fixes"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Error"}),(0,s.jsx)(n.th,{children:"Cause"}),(0,s.jsx)(n.th,{children:"Fix"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Gazebo: command not found"})}),(0,s.jsx)(n.td,{children:"Gazebo not installed"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"sudo apt install gazebo-harmonic"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"robot not spawning"})}),(0,s.jsx)(n.td,{children:"URDF path wrong or malformed"}),(0,s.jsxs)(n.td,{children:["Check file exists: ",(0,s.jsx)(n.code,{children:"ls ~/gazebo_ws/src/urdf/simple_robot.urdf"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"robot falls through ground"})}),(0,s.jsx)(n.td,{children:"Collision geometry missing"}),(0,s.jsxs)(n.td,{children:["Add ",(0,s.jsx)(n.code,{children:"<collision>"})," element to ground plane link"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"simulation very slow"})}),(0,s.jsx)(n.td,{children:"Timestep too small (0.0001)"}),(0,s.jsx)(n.td,{children:"Increase to 0.001 or 0.01"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"robot jerky movement"})}),(0,s.jsx)(n.td,{children:"Physics instability (high ERP)"}),(0,s.jsx)(n.td,{children:"Reduce ERP from 0.5 to 0.2"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"No ROS 2 topics from Gazebo"})}),(0,s.jsx)(n.td,{children:"gazebo_ros not installed"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"sudo apt install ros-humble-gazebo-ros-pkgs"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"URDF to SDF conversion failed"})}),(0,s.jsx)(n.td,{children:"URDF has SDF-incompatible elements"}),(0,s.jsx)(n.td,{children:"Check for unsupported URDF tags"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Gazebo Architecture"}),": World \u2192 Physics Engine \u2192 Models \u2192 Links & Joints"]}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"SDF Format"}),": Gazebo's native format with physics, sensors, and plugins"]}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Physics Simulation"}),": ODE solver with configurable gravity, friction, constraints"]}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"ROS 2 Integration"}),": Gazebo publishes state topics, accepts command topics"]}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Performance Tuning"}),": Timestep, ERP, CFM, and friction affect realism vs. speed"]}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Robot Loading"}),": Convert URDF to SDF automatically when spawning into Gazebo"]}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Debugging"}),": Use ROS 2 topics to monitor simulation state in real-time"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\ud83d\udcd6 ",(0,s.jsx)(n.a,{href:"https://gazebosim.org/docs",children:"Gazebo Documentation"})]}),"\n",(0,s.jsxs)(n.li,{children:["\ud83d\udcd6 ",(0,s.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Tutorials/Intermediate/Gazebo.html",children:"ROS 2 Gazebo Integration"})]}),"\n",(0,s.jsxs)(n.li,{children:["\ud83d\udcd6 ",(0,s.jsx)(n.a,{href:"http://sdformat.org/",children:"SDF Format Specification"})]}),"\n",(0,s.jsxs)(n.li,{children:["\ud83d\udcd6 ",(0,s.jsx)(n.a,{href:"http://www.ode.org/wiki/index.php/Manual",children:"ODE Physics Engine"})]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Next Lesson"}),": ",(0,s.jsx)(n.a,{href:"/physical-ai-textbook/docs/chapter-2/2-2-urdf-sdf-physics",children:"Lesson 2.2: URDF/SDF & Physics Configuration"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Questions?"})," See ",(0,s.jsx)(n.a,{href:"/physical-ai-textbook/docs/faq",children:"FAQ"})," or post in ",(0,s.jsx)(n.a,{href:"https://github.com/physical-ai-course/physical-ai-textbook/discussions",children:"GitHub Discussions"})]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);