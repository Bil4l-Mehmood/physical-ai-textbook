"use strict";(self.webpackChunkphysical_ai_textbook=self.webpackChunkphysical_ai_textbook||[]).push([[39],{8394:function(e,s,n){n.r(s),n.d(s,{assets:function(){return c},contentTitle:function(){return t},default:function(){return h},frontMatter:function(){return o},metadata:function(){return r},toc:function(){return d}});var r=JSON.parse('{"id":"chapter-1/1-2-ros2-core","title":"ROS 2 Core Concepts: Nodes, Topics, Services","description":"Learn ROS 2 publish/subscribe communication and build practical Python examples","source":"@site/docs/chapter-1/1-2-ros2-core.md","sourceDirName":"chapter-1","slug":"/chapter-1/1-2-ros2-core","permalink":"/physical-ai-textbook/docs/chapter-1/1-2-ros2-core","draft":false,"unlisted":false,"editUrl":"https://github.com/Bil4l-Mehmood/physical-ai-textbook/edit/main/docs/chapter-1/1-2-ros2-core.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"sidebar_label":"Lesson 1.2: ROS 2 Core Concepts","title":"ROS 2 Core Concepts: Nodes, Topics, Services","description":"Learn ROS 2 publish/subscribe communication and build practical Python examples","duration":60,"difficulty":"Beginner","hardware":["Jetson Orin Nano","ROS 2 Humble"],"prerequisites":["Lesson 1.1: Foundations of Physical AI"]},"sidebar":"tutorialSidebar","previous":{"title":"Lesson 1.1: Foundations of Physical AI","permalink":"/physical-ai-textbook/docs/chapter-1/1-1-foundations-pai"},"next":{"title":"Lesson 1.3: rclpy Packages & Launch","permalink":"/physical-ai-textbook/docs/chapter-1/1-3-rclpy-packages"}}'),i=n(4848),l=n(8453);const o={sidebar_position:2,sidebar_label:"Lesson 1.2: ROS 2 Core Concepts",title:"ROS 2 Core Concepts: Nodes, Topics, Services",description:"Learn ROS 2 publish/subscribe communication and build practical Python examples",duration:60,difficulty:"Beginner",hardware:["Jetson Orin Nano","ROS 2 Humble"],prerequisites:["Lesson 1.1: Foundations of Physical AI"]},t="Lesson 1.2: ROS 2 Core Concepts: Nodes, Topics, Services",c={},d=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Hardware &amp; Prerequisites",id:"hardware--prerequisites",level:2},{value:"ROS 2 Fundamentals",id:"ros-2-fundamentals",level:2},{value:"What is ROS 2?",id:"what-is-ros-2",level:3},{value:"Nodes",id:"nodes",level:3},{value:"Topics: Publish/Subscribe",id:"topics-publishsubscribe",level:3},{value:"Services: Request/Response",id:"services-requestresponse",level:3},{value:"Publish/Subscribe Architecture",id:"publishsubscribe-architecture",level:2},{value:"Publisher Example: Simple Talker",id:"publisher-example-simple-talker",level:3},{value:"Subscriber Example: Simple Listener",id:"subscriber-example-simple-listener",level:3},{value:"ROS 2 Command-Line Tools",id:"ros-2-command-line-tools",level:2},{value:"Monitoring Topics",id:"monitoring-topics",level:3},{value:"Monitoring Nodes",id:"monitoring-nodes",level:3},{value:"Services (Preview)",id:"services-preview",level:3},{value:"Hands-On Exercise",id:"hands-on-exercise",level:2},{value:"Step 1: Create the Python files",id:"step-1-create-the-python-files",level:3},{value:"Step 2: Run publisher (Terminal 1)",id:"step-2-run-publisher-terminal-1",level:3},{value:"Step 3: Run subscriber (Terminal 2)",id:"step-3-run-subscriber-terminal-2",level:3},{value:"Step 4: Monitor with ROS 2 tools (Terminal 3)",id:"step-4-monitor-with-ros-2-tools-terminal-3",level:3},{value:"Step 5: Modify the message",id:"step-5-modify-the-message",level:3},{value:"Common Errors &amp; Fixes",id:"common-errors--fixes",level:2},{value:"Key Takeaways",id:"key-takeaways",level:2},{value:"Code Example Files",id:"code-example-files",level:2},{value:"Further Reading",id:"further-reading",level:2},{value:"Next Steps",id:"next-steps",level:2}];function a(e){const s={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"lesson-12-ros-2-core-concepts-nodes-topics-services",children:"Lesson 1.2: ROS 2 Core Concepts: Nodes, Topics, Services"})}),"\n",(0,i.jsxs)(s.admonition,{title:"Lesson Overview",type:"info",children:[(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Duration"}),": 60 minutes | ",(0,i.jsx)(s.strong,{children:"Difficulty"}),": Beginner | ",(0,i.jsx)(s.strong,{children:"Hardware"}),": Jetson Orin Nano + ROS 2 Humble"]}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Prerequisites"}),": Complete Lesson 1.1 (Foundations of Physical AI)"]}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Learning Outcome"}),": Understand ROS 2's publish/subscribe architecture and write working Python examples"]})]}),"\n",(0,i.jsx)(s.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,i.jsx)(s.p,{children:"By the end of this lesson, you will be able to:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Understand ROS 2 nodes, topics, and publish/subscribe pattern"}),"\n",(0,i.jsx)(s.li,{children:"Explain how robots communicate using topics and services"}),"\n",(0,i.jsx)(s.li,{children:"Write a Python ROS 2 publisher that sends messages"}),"\n",(0,i.jsx)(s.li,{children:"Write a Python ROS 2 subscriber that receives messages"}),"\n",(0,i.jsx)(s.li,{children:"Use ROS 2 command-line tools to monitor topics"}),"\n",(0,i.jsx)(s.li,{children:"Understand synchronous services and when to use them"}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"hardware--prerequisites",children:"Hardware & Prerequisites"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Required Hardware"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"NVIDIA Jetson Orin Nano with ROS 2 Humble installed"}),"\n",(0,i.jsx)(s.li,{children:"SSH access or local terminal"}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Required Software"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"ROS 2 Humble (Humble Hawksbill LTS)"}),"\n",(0,i.jsx)(s.li,{children:"Python 3.10+"}),"\n",(0,i.jsx)(s.li,{children:"rclpy (ROS 2 Python library)"}),"\n",(0,i.jsx)(s.li,{children:"std_msgs package"}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Verification"}),": Confirm ROS 2 is installed and sourced"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"source /opt/ros/humble/setup.bash\r\nros2 --version\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Expected Output"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"ROS 2 Humble Hawksbill\n"})}),"\n",(0,i.jsx)(s.h2,{id:"ros-2-fundamentals",children:"ROS 2 Fundamentals"}),"\n",(0,i.jsx)(s.h3,{id:"what-is-ros-2",children:"What is ROS 2?"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"ROS 2"})," (Robot Operating System 2) is middleware that enables robots to have multiple processes (nodes) communicate reliably and efficiently. It handles:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Communication"}),": Nodes send messages to each other"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Scheduling"}),": Nodes can run in parallel"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Hardware abstraction"}),": Same code works across different robots"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Tools"}),": Visualization, debugging, simulation"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"nodes",children:"Nodes"}),"\n",(0,i.jsxs)(s.p,{children:["A ",(0,i.jsx)(s.strong,{children:"node"})," is a single process that does one thing. Examples:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"motor_controller"})," - Sends commands to motors"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"camera_reader"})," - Captures images from RealSense"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"object_detector"})," - Identifies objects in images"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"path_planner"})," - Calculates routes to goals"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Multiple nodes run simultaneously and communicate through ROS 2 middleware."}),"\n",(0,i.jsx)(s.h3,{id:"topics-publishsubscribe",children:"Topics: Publish/Subscribe"}),"\n",(0,i.jsxs)(s.p,{children:["A ",(0,i.jsx)(s.strong,{children:"topic"})," is a named channel for asynchronous one-way communication."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Example"}),": The ",(0,i.jsx)(s.code,{children:"robot_velocity"})," topic"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"[motor_controller node]\r\n         \u2193 publishes\r\n    /robot_velocity topic\r\n         \u2191\r\n[path_planner node] subscribes\n"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Publisher"}),": Sends messages to a topic (doesn't care who listens)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Subscriber"}),": Listens to messages on a topic"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Topic"}),": Named channel (e.g., ",(0,i.jsx)(s.code,{children:"/robot_velocity"}),", ",(0,i.jsx)(s.code,{children:"/camera/image"}),")"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Advantages"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Loose coupling: Publisher and subscriber don't need to know each other"}),"\n",(0,i.jsx)(s.li,{children:"One-to-many: One publisher, multiple subscribers"}),"\n",(0,i.jsx)(s.li,{children:"Non-blocking: Publisher doesn't wait for subscriber to receive"}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Disadvantages"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"No guarantee of delivery"}),"\n",(0,i.jsx)(s.li,{children:"No acknowledgment of success"}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"services-requestresponse",children:"Services: Request/Response"}),"\n",(0,i.jsxs)(s.p,{children:["A ",(0,i.jsx)(s.strong,{children:"service"})," is synchronous, request-response communication."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Example"}),": The ",(0,i.jsx)(s.code,{children:"plan_path"})," service"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"[client node]\r\n    \u2502 calls service\r\n    \u2502 (waits for response)\r\n    \u2193\r\n[service server node]\r\n    \u2502 processes request\r\n    \u2502 sends response\r\n    \u2193\r\n[client node]\r\n    receives response\r\n    (continues)\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Use cases"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Getting current robot state: ",(0,i.jsx)(s.code,{children:"get_position"})," service"]}),"\n",(0,i.jsxs)(s.li,{children:["Planning operations: ",(0,i.jsx)(s.code,{children:"plan_path"})," service"]}),"\n",(0,i.jsxs)(s.li,{children:["Configuration: ",(0,i.jsx)(s.code,{children:"set_parameter"})," service"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Advantages"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Synchronous: Caller waits for response"}),"\n",(0,i.jsx)(s.li,{children:"Acknowledgment: Server must respond"}),"\n",(0,i.jsx)(s.li,{children:"Bidirectional: Both request and response"}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Disadvantages"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Blocking: Caller must wait"}),"\n",(0,i.jsx)(s.li,{children:"One-to-one: Not suitable for continuous streams"}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"publishsubscribe-architecture",children:"Publish/Subscribe Architecture"}),"\n",(0,i.jsx)(s.h3,{id:"publisher-example-simple-talker",children:"Publisher Example: Simple Talker"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"File"}),": ",(0,i.jsx)(s.code,{children:"ros2_publisher.py"})]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Hardware"}),": Jetson Orin Nano with ROS 2 Humble"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Purpose"}),': Send "Hello ROS 2" messages every 0.5 seconds']}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:'#!/usr/bin/env python3\r\n# Copyright (c) 2025 Physical AI Course\r\n# License: MIT\r\n# Target: NVIDIA Jetson Orin Nano - ROS 2 Humble\r\n\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import String\r\n\r\n\r\nclass MinimalPublisher(Node):\r\n    """\r\n    A simple ROS 2 publisher that sends String messages.\r\n\r\n    This node demonstrates the basic publish/subscribe pattern:\r\n    - Creates a publisher on topic \'topic\'\r\n    - Publishes a message every 0.5 seconds\r\n    - Runs indefinitely until interrupted\r\n    """\r\n\r\n    def __init__(self):\r\n        """Initialize the publisher node."""\r\n        # Call parent class constructor with node name\r\n        super().__init__(\'minimal_publisher\')\r\n\r\n        # Create a publisher that publishes String messages\r\n        # Arguments: message_type, topic_name, queue_size\r\n        self.publisher_ = self.create_publisher(String, \'topic\', 10)\r\n\r\n        # Create a timer that calls timer_callback every 0.5 seconds\r\n        timer_period = 0.5  # seconds\r\n        self.timer = self.create_timer(timer_period, self.timer_callback)\r\n\r\n        # Counter for messages\r\n        self.i = 0\r\n\r\n    def timer_callback(self):\r\n        """\r\n        Called periodically by the timer.\r\n        Publishes a message and logs to console.\r\n        """\r\n        # Create a String message\r\n        msg = String()\r\n        msg.data = f\'Hello ROS 2: {self.i}\'\r\n\r\n        # Publish the message\r\n        self.publisher_.publish(msg)\r\n\r\n        # Log to console (appears in stdout)\r\n        self.get_logger().info(f\'Publishing: "{msg.data}"\')\r\n\r\n        # Increment counter\r\n        self.i += 1\r\n\r\n\r\ndef main(args=None):\r\n    """\r\n    Main function: Initialize ROS 2, create node, spin, cleanup.\r\n    """\r\n    # Initialize ROS 2 communication\r\n    rclpy.init(args=args)\r\n\r\n    # Create the publisher node\r\n    minimal_publisher = MinimalPublisher()\r\n\r\n    # Spin the node (keep it running and processing callbacks)\r\n    # This blocks until the node is shut down (Ctrl+C)\r\n    rclpy.spin(minimal_publisher)\r\n\r\n    # Cleanup when done (Ctrl+C pressed)\r\n    minimal_publisher.destroy_node()\r\n    rclpy.shutdown()\r\n\r\n\r\nif __name__ == \'__main__\':\r\n    main()\n'})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Expected Output"})," (when run):"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:'[INFO] [minimal_publisher]: Publishing: "Hello ROS 2: 0"\r\n[INFO] [minimal_publisher]: Publishing: "Hello ROS 2: 1"\r\n[INFO] [minimal_publisher]: Publishing: "Hello ROS 2: 2"\r\n[INFO] [minimal_publisher]: Publishing: "Hello ROS 2: 3"\r\n...\n'})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"How to run"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Source ROS 2 setup\r\nsource /opt/ros/humble/setup.bash\r\n\r\n# Run the publisher\r\npython3 ros2_publisher.py\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"What happens"}),":"]}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"Node initializes ROS 2 communication"}),"\n",(0,i.jsxs)(s.li,{children:["Creates publisher on topic named ",(0,i.jsx)(s.code,{children:"topic"})]}),"\n",(0,i.jsx)(s.li,{children:'Every 0.5 seconds, publishes message "Hello ROS 2: N"'}),"\n",(0,i.jsx)(s.li,{children:"Runs indefinitely (press Ctrl+C to stop)"}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"subscriber-example-simple-listener",children:"Subscriber Example: Simple Listener"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"File"}),": ",(0,i.jsx)(s.code,{children:"ros2_subscriber.py"})]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Hardware"}),": Jetson Orin Nano with ROS 2 Humble"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Purpose"}),": Receive messages from the publisher"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:'#!/usr/bin/env python3\r\n# Copyright (c) 2025 Physical AI Course\r\n# License: MIT\r\n# Target: NVIDIA Jetson Orin Nano - ROS 2 Humble\r\n\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import String\r\n\r\n\r\nclass MinimalSubscriber(Node):\r\n    """\r\n    A simple ROS 2 subscriber that listens to String messages.\r\n\r\n    This node demonstrates the subscribe pattern:\r\n    - Subscribes to topic \'topic\'\r\n    - Receives messages published by MinimalPublisher\r\n    - Logs received messages to console\r\n    """\r\n\r\n    def __init__(self):\r\n        """Initialize the subscriber node."""\r\n        # Call parent class constructor with node name\r\n        super().__init__(\'minimal_subscriber\')\r\n\r\n        # Create a subscription to topic \'topic\'\r\n        # Arguments: message_type, topic_name, callback_function, queue_size\r\n        self.subscription = self.create_subscription(\r\n            String,\r\n            \'topic\',\r\n            self.listener_callback,\r\n            10)\r\n\r\n        # Suppress unused variable warning\r\n        self.subscription  # prevent unused variable warning\r\n\r\n    def listener_callback(self, msg):\r\n        """\r\n        Callback function called whenever a message is received.\r\n\r\n        Args:\r\n            msg: The received message (String in this case)\r\n        """\r\n        # Log the received message\r\n        self.get_logger().info(f\'Heard: "{msg.data}"\')\r\n\r\n\r\ndef main(args=None):\r\n    """\r\n    Main function: Initialize ROS 2, create node, spin, cleanup.\r\n    """\r\n    # Initialize ROS 2 communication\r\n    rclpy.init(args=args)\r\n\r\n    # Create the subscriber node\r\n    minimal_subscriber = MinimalSubscriber()\r\n\r\n    # Spin the node (keep it running and calling callbacks)\r\n    # This blocks until the node is shut down (Ctrl+C)\r\n    rclpy.spin(minimal_subscriber)\r\n\r\n    # Cleanup when done (Ctrl+C pressed)\r\n    minimal_subscriber.destroy_node()\r\n    rclpy.shutdown()\r\n\r\n\r\nif __name__ == \'__main__\':\r\n    main()\n'})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Expected Output"})," (when publisher is also running):"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:'[INFO] [minimal_subscriber]: Heard: "Hello ROS 2: 0"\r\n[INFO] [minimal_subscriber]: Heard: "Hello ROS 2: 1"\r\n[INFO] [minimal_subscriber]: Heard: "Hello ROS 2: 2"\r\n[INFO] [minimal_subscriber]: Heard: "Hello ROS 2: 3"\r\n...\n'})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"How to run"})," (in separate terminals):"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Terminal 1: Run the publisher\r\nsource /opt/ros/humble/setup.bash\r\npython3 ros2_publisher.py\r\n\r\n# Terminal 2: Run the subscriber\r\nsource /opt/ros/humble/setup.bash\r\npython3 ros2_subscriber.py\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"What happens"}),":"]}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["Subscriber node initializes and subscribes to ",(0,i.jsx)(s.code,{children:"topic"})]}),"\n",(0,i.jsx)(s.li,{children:"When publisher publishes a message, subscriber's callback is triggered"}),"\n",(0,i.jsx)(s.li,{children:"Callback receives the message and logs it"}),"\n",(0,i.jsx)(s.li,{children:"Receiver runs indefinitely (press Ctrl+C to stop)"}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"ros-2-command-line-tools",children:"ROS 2 Command-Line Tools"}),"\n",(0,i.jsx)(s.h3,{id:"monitoring-topics",children:"Monitoring Topics"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"List all active topics"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"ros2 topic list\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Output"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"/topic\r\n/parameter_events\r\n/rosout\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"View messages on a topic"})," (subscribe and display):"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"ros2 topic echo /topic\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Output"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"data: 'Hello ROS 2: 0'\r\n---\r\ndata: 'Hello ROS 2: 1'\r\n---\r\ndata: 'Hello ROS 2: 2'\r\n---\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Check topic message rate and type"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"ros2 topic info /topic\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Output"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"Type: std_msgs/msg/String\r\nPublisher count: 1\r\nSubscription count: 1\n"})}),"\n",(0,i.jsx)(s.h3,{id:"monitoring-nodes",children:"Monitoring Nodes"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"List all active nodes"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"ros2 node list\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Output"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"/minimal_publisher\r\n/minimal_subscriber\n"})}),"\n",(0,i.jsx)(s.h3,{id:"services-preview",children:"Services (Preview)"}),"\n",(0,i.jsx)(s.p,{children:"ROS 2 also supports services for request/response communication. Services will be covered in detail in Lesson 1.3."}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"hands-on-exercise",children:"Hands-On Exercise"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Task"}),": Run the publisher and subscriber, monitor with ROS 2 tools, and modify the message."]}),"\n",(0,i.jsx)(s.h3,{id:"step-1-create-the-python-files",children:"Step 1: Create the Python files"}),"\n",(0,i.jsxs)(s.p,{children:["Save the publisher code as ",(0,i.jsx)(s.code,{children:"ros2_publisher.py"})," and subscriber code as ",(0,i.jsx)(s.code,{children:"ros2_subscriber.py"}),"."]}),"\n",(0,i.jsx)(s.h3,{id:"step-2-run-publisher-terminal-1",children:"Step 2: Run publisher (Terminal 1)"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"source /opt/ros/humble/setup.bash\r\npython3 ros2_publisher.py\n"})}),"\n",(0,i.jsx)(s.p,{children:"Expected: Messages printed every 0.5 seconds."}),"\n",(0,i.jsx)(s.h3,{id:"step-3-run-subscriber-terminal-2",children:"Step 3: Run subscriber (Terminal 2)"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"source /opt/ros/humble/setup.bash\r\npython3 ros2_subscriber.py\n"})}),"\n",(0,i.jsx)(s.p,{children:"Expected: Subscriber receives and logs messages."}),"\n",(0,i.jsx)(s.h3,{id:"step-4-monitor-with-ros-2-tools-terminal-3",children:"Step 4: Monitor with ROS 2 tools (Terminal 3)"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"source /opt/ros/humble/setup.bash\r\nros2 topic echo /topic\n"})}),"\n",(0,i.jsx)(s.p,{children:"Expected: See raw message data flowing."}),"\n",(0,i.jsx)(s.h3,{id:"step-5-modify-the-message",children:"Step 5: Modify the message"}),"\n",(0,i.jsxs)(s.p,{children:["Edit ",(0,i.jsx)(s.code,{children:"ros2_publisher.py"})," and change:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"msg.data = f'Hello ROS 2: {self.i}'\n"})}),"\n",(0,i.jsx)(s.p,{children:"to:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"msg.data = f'[Jetson Orin Nano] Message #{self.i}'\n"})}),"\n",(0,i.jsx)(s.p,{children:"Stop the publisher (Ctrl+C), run it again, and observe the new message format in the subscriber output."}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"common-errors--fixes",children:"Common Errors & Fixes"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Error"}),(0,i.jsx)(s.th,{children:"Cause"}),(0,i.jsx)(s.th,{children:"Fix"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"ModuleNotFoundError: No module named 'rclpy'"})}),(0,i.jsx)(s.td,{children:"ROS 2 not sourced"}),(0,i.jsxs)(s.td,{children:["Run ",(0,i.jsx)(s.code,{children:"source /opt/ros/humble/setup.bash"})]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"This node has already been initialized"})}),(0,i.jsx)(s.td,{children:"Created multiple nodes"}),(0,i.jsxs)(s.td,{children:["Ensure only one ",(0,i.jsx)(s.code,{children:"rclpy.init()"})," call"]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Subscriber doesn't receive messages"}),(0,i.jsx)(s.td,{children:"Topic name mismatch"}),(0,i.jsxs)(s.td,{children:["Use ",(0,i.jsx)(s.code,{children:"ros2 topic list"})," to verify topic names"]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"Permission denied"})}),(0,i.jsx)(s.td,{children:"File not executable"}),(0,i.jsxs)(s.td,{children:["Run ",(0,i.jsx)(s.code,{children:"chmod +x ros2_publisher.py"})," or use ",(0,i.jsx)(s.code,{children:"python3 ros2_publisher.py"})]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Ctrl+C doesn't stop node"}),(0,i.jsx)(s.td,{children:"Interrupted during cleanup"}),(0,i.jsxs)(s.td,{children:["Press Ctrl+C again or use ",(0,i.jsx)(s.code,{children:"pkill -f ros2_"})]})]})]})]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,i.jsxs)(s.p,{children:["\u2705 ",(0,i.jsx)(s.strong,{children:"Nodes"})," are independent processes that communicate via ROS 2"]}),"\n",(0,i.jsxs)(s.p,{children:["\u2705 ",(0,i.jsx)(s.strong,{children:"Topics"})," enable asynchronous publish/subscribe communication (one-to-many)"]}),"\n",(0,i.jsxs)(s.p,{children:["\u2705 ",(0,i.jsx)(s.strong,{children:"Publishers"})," send messages to a topic without waiting for receivers"]}),"\n",(0,i.jsxs)(s.p,{children:["\u2705 ",(0,i.jsx)(s.strong,{children:"Subscribers"})," listen to topics and process messages via callbacks"]}),"\n",(0,i.jsxs)(s.p,{children:["\u2705 ",(0,i.jsx)(s.strong,{children:"Services"})," provide synchronous request/response communication (one-to-one)"]}),"\n",(0,i.jsxs)(s.p,{children:["\u2705 ",(0,i.jsx)(s.strong,{children:"ROS 2 tools"})," (",(0,i.jsx)(s.code,{children:"ros2 topic"}),", ",(0,i.jsx)(s.code,{children:"ros2 node"}),") help monitor and debug running systems"]}),"\n",(0,i.jsxs)(s.p,{children:["\u2705 ",(0,i.jsx)(s.strong,{children:"Decoupling"})," is key: Nodes don't need to know each other; communication goes through topics"]}),"\n",(0,i.jsx)(s.h2,{id:"code-example-files",children:"Code Example Files"}),"\n",(0,i.jsx)(s.p,{children:"Complete code examples are provided:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"ros2_publisher.py"})," - Full working publisher"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"ros2_subscriber.py"})," - Full working subscriber"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Both are executable and tested on Jetson Orin Nano with ROS 2 Humble."}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\ud83d\udcd6 ",(0,i.jsx)(s.a,{href:"https://docs.ros.org/en/humble/Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Topics/Understanding-ROS2-Topics.html",children:"ROS 2 Publish and Subscribe"})]}),"\n",(0,i.jsxs)(s.li,{children:["\ud83d\udcd6 ",(0,i.jsx)(s.a,{href:"https://docs.ros.org/en/humble/Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Services/Understanding-ROS2-Services.html",children:"ROS 2 Services"})]}),"\n",(0,i.jsxs)(s.li,{children:["\ud83d\udcd6 ",(0,i.jsx)(s.a,{href:"https://docs.ros.org/en/humble/Concepts/Intermediate/About-ROS-2-Node.html",children:"rclpy Node Documentation"})]}),"\n",(0,i.jsxs)(s.li,{children:["\ud83d\udcd6 ",(0,i.jsx)(s.a,{href:"https://docs.ros.org/en/humble/Concepts/Intermediate/About-ROS-2-Message-Types.html",children:"std_msgs Message Types"})]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(s.p,{children:["Ready to organize your code? Head to ",(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.a,{href:"/docs/chapter-1/1-3-rclpy-packages",children:"Lesson 1.3: Building rclpy Packages and Launch Files"})})," to learn how to structure ROS 2 projects and manage multiple nodes."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Questions?"})," Ask on ",(0,i.jsx)(s.a,{href:"https://github.com/physical-ai-course/physical-ai-textbook/discussions",children:"GitHub Discussions"})," or check ",(0,i.jsx)(s.a,{href:"#common-errors--fixes",children:"Common Errors & Fixes"})]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.em,{children:"Last Updated: 2025-12-05"}),"\r\n",(0,i.jsx)(s.em,{children:"Code Examples: Tested on Jetson Orin Nano with ROS 2 Humble"}),"\r\n",(0,i.jsx)(s.em,{children:"Execution Time: ~15 min (reading) + ~20 min (hands-on) = 35 minutes"})]})]})}function h(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:function(e,s,n){n.d(s,{R:function(){return o},x:function(){return t}});var r=n(6540);const i={},l=r.createContext(i);function o(e){const s=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(l.Provider,{value:s},e.children)}}}]);