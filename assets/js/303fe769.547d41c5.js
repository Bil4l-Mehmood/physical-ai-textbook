"use strict";(self.webpackChunkphysical_ai_textbook=self.webpackChunkphysical_ai_textbook||[]).push([[298],{8453:function(e,n,r){r.d(n,{R:function(){return i},x:function(){return a}});var t=r(6540);const s={},o=t.createContext(s);function i(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(o.Provider,{value:n},e.children)}},9740:function(e,n,r){r.r(n),r.d(n,{assets:function(){return l},contentTitle:function(){return a},default:function(){return p},frontMatter:function(){return i},metadata:function(){return t},toc:function(){return c}});var t=JSON.parse('{"id":"chapter-4/4-1-llm-brain","title":"LLM Integration for Robotics: Building the Robot\'s Cognitive Core","description":"Integrate large language models (GPT-4, Gemini, open-source) with ROS 2 for natural language understanding and reasoning","source":"@site/docs/chapter-4/4-1-llm-brain.md","sourceDirName":"chapter-4","slug":"/chapter-4/4-1-llm-brain","permalink":"/physical-ai-textbook/docs/chapter-4/4-1-llm-brain","draft":false,"unlisted":false,"editUrl":"https://github.com/Bil4l-Mehmood/physical-ai-textbook/edit/main/docs/chapter-4/4-1-llm-brain.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"sidebar_label":"Lesson 4.1: LLM Integration","title":"LLM Integration for Robotics: Building the Robot\'s Cognitive Core","description":"Integrate large language models (GPT-4, Gemini, open-source) with ROS 2 for natural language understanding and reasoning","duration":120,"difficulty":"Advanced","hardware":["Jetson Orin Nano 8GB","OpenAI API key OR local LLM","ROS 2 Humble","4GB free VRAM minimum"],"prerequisites":["Lesson 3.3: Computer Vision with Isaac ROS"]},"sidebar":"tutorialSidebar","previous":{"title":"Lesson 3.3: Computer Vision Isaac ROS","permalink":"/physical-ai-textbook/docs/chapter-3/3-3-computer-vision-isaac-ros"},"next":{"title":"Lesson 4.2: Conversational AI & VLA","permalink":"/physical-ai-textbook/docs/chapter-4/4-2-conversational-ai"}}'),s=r(4848),o=r(8453);const i={sidebar_position:1,sidebar_label:"Lesson 4.1: LLM Integration",title:"LLM Integration for Robotics: Building the Robot's Cognitive Core",description:"Integrate large language models (GPT-4, Gemini, open-source) with ROS 2 for natural language understanding and reasoning",duration:120,difficulty:"Advanced",hardware:["Jetson Orin Nano 8GB","OpenAI API key OR local LLM","ROS 2 Humble","4GB free VRAM minimum"],prerequisites:["Lesson 3.3: Computer Vision with Isaac ROS"]},a="Lesson 4.1: LLM Integration for Robotics - Building the Cognitive Core",l={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Hardware Requirements",id:"hardware-requirements",level:2},{value:"Cloud-Based LLMs (Recommended for beginners)",id:"cloud-based-llms-recommended-for-beginners",level:3},{value:"Edge-Based LLMs (Advanced)",id:"edge-based-llms-advanced",level:3},{value:"Part 1: LLM Fundamentals for Robotics",id:"part-1-llm-fundamentals-for-robotics",level:2},{value:"What LLMs Bring to Robots",id:"what-llms-bring-to-robots",level:3},{value:"Key Concepts for Robot Developers",id:"key-concepts-for-robot-developers",level:3},{value:"Part 2: Cloud-Based LLM Integration with OpenAI",id:"part-2-cloud-based-llm-integration-with-openai",level:2},{value:"Setting Up OpenAI API",id:"setting-up-openai-api",level:3},{value:"ROS 2 LLM Integration Node",id:"ros-2-llm-integration-node",level:3},{value:"Part 3: Open-Source LLM Deployment with Ollama",id:"part-3-open-source-llm-deployment-with-ollama",level:2},{value:"Installing Ollama on Jetson",id:"installing-ollama-on-jetson",level:3},{value:"Local LLM ROS 2 Node",id:"local-llm-ros-2-node",level:3},{value:"Part 4: Prompt Engineering for Robotic Tasks",id:"part-4-prompt-engineering-for-robotic-tasks",level:2},{value:"Template: Task Planning Prompt",id:"template-task-planning-prompt",level:3},{value:"Template: Safety Verification Prompt",id:"template-safety-verification-prompt",level:3},{value:"Part 5: Handling LLM Failure Cases",id:"part-5-handling-llm-failure-cases",level:2},{value:"Fallback Strategies",id:"fallback-strategies",level:3},{value:"Part 6: Cost Optimization Strategies",id:"part-6-cost-optimization-strategies",level:2},{value:"Token Budget Management",id:"token-budget-management",level:3},{value:"Hands-On Exercise: Build Your First LLM-Powered Robot",id:"hands-on-exercise-build-your-first-llm-powered-robot",level:2},{value:"Exercise 1: Simple Command-to-Action Conversion",id:"exercise-1-simple-command-to-action-conversion",level:3},{value:"Exercise 2: Create Custom Robot Instruction Set",id:"exercise-2-create-custom-robot-instruction-set",level:3},{value:"Exercise 3: Monitor and Optimize LLM Latency",id:"exercise-3-monitor-and-optimize-llm-latency",level:3},{value:"Common LLM Integration Errors &amp; Debugging",id:"common-llm-integration-errors--debugging",level:2},{value:"Key Takeaways",id:"key-takeaways",level:2},{value:"Further Reading",id:"further-reading",level:2},{value:"Official Documentation",id:"official-documentation",level:3},{value:"Research Papers",id:"research-papers",level:3},{value:"Robotics Integration",id:"robotics-integration",level:3},{value:"Next Lesson",id:"next-lesson",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"lesson-41-llm-integration-for-robotics---building-the-cognitive-core",children:"Lesson 4.1: LLM Integration for Robotics - Building the Cognitive Core"})}),"\n",(0,s.jsxs)(n.admonition,{title:"Lesson Overview",type:"info",children:[(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Duration"}),": 120 minutes | ",(0,s.jsx)(n.strong,{children:"Difficulty"}),": Advanced | ",(0,s.jsx)(n.strong,{children:"Hardware"}),": Jetson + LLM access (cloud or local)"]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Prerequisites"}),": Chapter 3 complete (perception and navigation working)"]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Learning Outcome"}),": Integrate large language models with ROS 2 to enable robots to understand natural language commands, reason about tasks, and generate semantic understanding of the environment"]})]}),"\n",(0,s.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,s.jsx)(n.p,{children:"By the end of this lesson, you will be able to:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Understand how large language models (LLMs) enhance robot decision-making"}),"\n",(0,s.jsx)(n.li,{children:"Compare cloud-based LLMs (GPT-4, Gemini) vs. edge-deployed LLMs"}),"\n",(0,s.jsx)(n.li,{children:"Integrate OpenAI API with ROS 2 for natural language processing"}),"\n",(0,s.jsx)(n.li,{children:"Deploy open-source LLMs locally using Ollama"}),"\n",(0,s.jsx)(n.li,{children:"Build prompt engineering strategies for robot task understanding"}),"\n",(0,s.jsx)(n.li,{children:"Create ROS 2 nodes that invoke LLMs for planning and reasoning"}),"\n",(0,s.jsx)(n.li,{children:"Parse LLM outputs into actionable robot commands"}),"\n",(0,s.jsx)(n.li,{children:"Handle API failures and implement fallback strategies"}),"\n",(0,s.jsx)(n.li,{children:"Measure LLM inference latency and optimize for real-time control"}),"\n",(0,s.jsx)(n.li,{children:"Build multi-turn conversation systems with context memory"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"hardware-requirements",children:"Hardware Requirements"}),"\n",(0,s.jsx)(n.admonition,{title:"LLM Deployment Strategies",type:"note",children:(0,s.jsx)(n.p,{children:"LLMs present a choice: cloud convenience vs. edge autonomy. This lesson covers both approaches."})}),"\n",(0,s.jsx)(n.h3,{id:"cloud-based-llms-recommended-for-beginners",children:"Cloud-Based LLMs (Recommended for beginners)"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Provider"}),(0,s.jsx)(n.th,{children:"Model"}),(0,s.jsx)(n.th,{children:"Cost"}),(0,s.jsx)(n.th,{children:"Latency"}),(0,s.jsx)(n.th,{children:"Use Case"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"OpenAI"})}),(0,s.jsx)(n.td,{children:"GPT-4 Turbo"}),(0,s.jsx)(n.td,{children:"$0.01/1K tokens"}),(0,s.jsx)(n.td,{children:"200-500ms"}),(0,s.jsx)(n.td,{children:"Complex reasoning, English"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"OpenAI"})}),(0,s.jsx)(n.td,{children:"GPT-3.5 Turbo"}),(0,s.jsx)(n.td,{children:"$0.001/1K tokens"}),(0,s.jsx)(n.td,{children:"100-300ms"}),(0,s.jsx)(n.td,{children:"Fast responses, cost-effective"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Google"})}),(0,s.jsx)(n.td,{children:"Gemini Pro"}),(0,s.jsx)(n.td,{children:"Free tier limited"}),(0,s.jsx)(n.td,{children:"300-600ms"}),(0,s.jsx)(n.td,{children:"Multimodal input (vision+text)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Anthropic"})}),(0,s.jsx)(n.td,{children:"Claude 3"}),(0,s.jsx)(n.td,{children:"$0.003/1K tokens"}),(0,s.jsx)(n.td,{children:"200-400ms"}),(0,s.jsx)(n.td,{children:"Long context, nuanced reasoning"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Advantages:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u2705 Latest models always available"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 No local resource burden"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Proven reliability at scale"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Easy integration via API"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Disadvantages:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u274c Internet dependency required"}),"\n",(0,s.jsx)(n.li,{children:"\u274c Per-token cost accumulates"}),"\n",(0,s.jsx)(n.li,{children:"\u274c Data sent to external servers"}),"\n",(0,s.jsx)(n.li,{children:"\u274c Higher latency (100-500ms)"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"edge-based-llms-advanced",children:"Edge-Based LLMs (Advanced)"}),"\n",(0,s.jsx)(n.p,{children:"Running LLMs locally on Jetson requires:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Model"}),(0,s.jsx)(n.th,{children:"VRAM"}),(0,s.jsx)(n.th,{children:"Latency"}),(0,s.jsx)(n.th,{children:"Speed"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Llama 2 7B Quantized"})}),(0,s.jsx)(n.td,{children:"4-6 GB"}),(0,s.jsx)(n.td,{children:"500-1000ms"}),(0,s.jsx)(n.td,{children:"10-20 tokens/sec"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Mistral 7B Quantized"})}),(0,s.jsx)(n.td,{children:"4-6 GB"}),(0,s.jsx)(n.td,{children:"400-800ms"}),(0,s.jsx)(n.td,{children:"15-25 tokens/sec"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Phi 2 3B"})}),(0,s.jsx)(n.td,{children:"2-3 GB"}),(0,s.jsx)(n.td,{children:"200-400ms"}),(0,s.jsx)(n.td,{children:"25-35 tokens/sec"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"TinyLlama 1B"})}),(0,s.jsx)(n.td,{children:"1-2 GB"}),(0,s.jsx)(n.td,{children:"100-200ms"}),(0,s.jsx)(n.td,{children:"50+ tokens/sec"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Deployment with Ollama:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ollama pull llama2\r\n# OR\r\nollama pull mistral\r\n# OR\r\nollama pull phi\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Advantages:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u2705 Zero latency from network"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Complete privacy (no data leaves robot)"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Works offline"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 No per-token costs"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Disadvantages:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u274c Limited model selection"}),"\n",(0,s.jsx)(n.li,{children:"\u274c Lower quality than cloud LLMs"}),"\n",(0,s.jsx)(n.li,{children:"\u274c High memory usage"}),"\n",(0,s.jsx)(n.li,{children:"\u274c Slower inference"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"part-1-llm-fundamentals-for-robotics",children:"Part 1: LLM Fundamentals for Robotics"}),"\n",(0,s.jsx)(n.h3,{id:"what-llms-bring-to-robots",children:"What LLMs Bring to Robots"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Traditional Robot Programming:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'User Input: "Pick up the cube"\r\n    \u2193\r\nHardcoded Parser \u2192 Extract: object="cube", action="pick"\r\n    \u2193\r\nState Machine \u2192 Execute predefined sequence\r\n    \u2193\r\nIssue: Doesn\'t handle variations like "grab the red one" or "get the big cube"\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"LLM-Enhanced Robot:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'User Input: "Pick up the red cube if it\'s to your left, otherwise move to the table first"\r\n    \u2193\r\nLLM Processing:\r\n\u251c\u2500 Understand: Complex conditional logic\r\n\u251c\u2500 Reason: Check left side first, then table\r\n\u251c\u2500 Generate: Multi-step plan\r\n\u2514\u2500 Translate: [look_left, detect_cube, if_found: grasp, else: navigate_to_table, grasp]\r\n    \u2193\r\nRobot Execution\r\n    \u2193\r\n\u2705 Handles natural language variation and context\n'})}),"\n",(0,s.jsx)(n.h3,{id:"key-concepts-for-robot-developers",children:"Key Concepts for Robot Developers"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"1. Prompt Engineering for Robotics"})}),"\n",(0,s.jsx)(n.p,{children:"Effective prompts constrain LLM outputs to robot capabilities:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# BAD: Too open-ended\r\nprompt = "What should the robot do?"\r\n\r\n# GOOD: Specifies constraints\r\nprompt = """You are a robot control system.\r\nThe robot can:\r\n- Move forward/backward/left/right at 0-1 m/s\r\n- Grasp objects with gripper (open/close)\r\n- Detect objects in view (red, blue, yellow, green)\r\n\r\nUser command: "Pick up the red cube"\r\n\r\nGenerate a JSON action sequence like:\r\n{"actions": [\r\n  {"type": "move_towards", "object": "red cube"},\r\n  {"type": "grasp", "duration": 1000},\r\n  {"type": "move_to", "location": "drop zone"}\r\n]}\r\n"""\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"2. Token Economy"})}),"\n",(0,s.jsx)(n.p,{children:'LLMs process text as "tokens" (~4 characters = 1 token). Costs accumulate:'}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"GPT-4: $0.03 per 1K input tokens, $0.06 per 1K output tokens\r\n\r\nExample: 5-minute robot conversation\r\n\u251c\u2500 User commands: 100 tokens/min \xd7 5 = 500 tokens (input)\r\n\u251c\u2500 Robot responses: 150 tokens/min \xd7 5 = 750 tokens (output)\r\n\u251c\u2500 Cost: (500 \xd7 $0.03 / 1000) + (750 \xd7 $0.06 / 1000) = $0.06\r\n\u2514\u2500 Per 8-hour day: $0.06 \xd7 480 interactions = ~$29/day\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"3. Context Window Size"})}),"\n",(0,s.jsx)(n.p,{children:"LLMs have memory limits:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Model          Context Window    Practical for Robots\r\nGPT-3.5 Turbo  4,096 tokens      Recent 10-15 commands\r\nGPT-4 Turbo    128,000 tokens    Full conversation history (8+ hours)\r\nLlama 2 7B     4,096 tokens      Last few interactions only\r\nMistral 7B     8,000 tokens      ~20 minutes of dialogue\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"4. Latency Constraints"})}),"\n",(0,s.jsx)(n.p,{children:"Robot control requires fast inference:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Acceptable Latency Thresholds:\r\n\u251c\u2500 Planning (before action): 200-500ms (human waits)\r\n\u251c\u2500 Reactive control (during action): 50-100ms (real-time required)\r\n\u251c\u2500 Conversation (dialogue): 500-1000ms (human conversation pace)\r\n\u251c\u2500 Analysis (after action): 1000ms+ (no real-time requirement)\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"part-2-cloud-based-llm-integration-with-openai",children:"Part 2: Cloud-Based LLM Integration with OpenAI"}),"\n",(0,s.jsx)(n.h3,{id:"setting-up-openai-api",children:"Setting Up OpenAI API"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 1: Create OpenAI Account and API Key"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Visit: https://platform.openai.com/account/api-keys\r\n# Create new secret key\r\nexport OPENAI_API_KEY="sk-proj-xxxxxxxxxxxxxxxxxxxxxxxx"\r\n\r\n# Verify (don\'t hardcode keys!)\r\necho $OPENAI_API_KEY\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 2: Install Python Dependencies"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# OpenAI SDK\r\npip install openai\r\n\r\n# ROS 2 client library\r\npip install rclpy sensor-msgs std-msgs\r\n\r\n# For local LLMs (Ollama) later\r\npip install ollama\n"})}),"\n",(0,s.jsx)(n.h3,{id:"ros-2-llm-integration-node",children:"ROS 2 LLM Integration Node"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\r\n\"\"\"\r\nROS 2 node for LLM-based robot planning\r\nConnects to OpenAI GPT-4 Turbo for natural language understanding\r\n\"\"\"\r\n\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import String\r\nimport json\r\nimport os\r\nfrom openai import OpenAI\r\n\r\nclass LLMRobotPlanner(Node):\r\n    def __init__(self):\r\n        super().__init__('llm_robot_planner')\r\n\r\n        # Initialize OpenAI client\r\n        api_key = os.getenv('OPENAI_API_KEY')\r\n        if not api_key:\r\n            self.get_logger().error(\r\n                'OPENAI_API_KEY not set. Run: export OPENAI_API_KEY=\"sk-...\"'\r\n            )\r\n            return\r\n\r\n        self.client = OpenAI(api_key=api_key)\r\n        self.model = 'gpt-4-turbo-preview'  # Latest reasoning model\r\n\r\n        # Robot capabilities (known to LLM via system prompt)\r\n        self.robot_capabilities = {\r\n            'movements': ['move_forward', 'move_backward', 'turn_left', 'turn_right'],\r\n            'actions': ['grasp', 'release', 'look_around'],\r\n            'sensors': ['camera', 'lidar', 'force_sensor'],\r\n            'max_speed': 1.0,  # m/s\r\n            'gripper_force': 10  # Newtons\r\n        }\r\n\r\n        # System prompt that constrains LLM behavior\r\n        self.system_prompt = self._build_system_prompt()\r\n\r\n        # Conversation history for context\r\n        self.conversation_history = []\r\n\r\n        # ROS 2 Interface\r\n        self.command_sub = self.create_subscription(\r\n            String,\r\n            '/human/command',\r\n            self.command_callback,\r\n            10\r\n        )\r\n\r\n        self.plan_pub = self.create_publisher(\r\n            String,\r\n            '/robot/plan',\r\n            10\r\n        )\r\n\r\n        self.explanation_pub = self.create_publisher(\r\n            String,\r\n            '/robot/explanation',\r\n            10\r\n        )\r\n\r\n        self.get_logger().info('LLM Robot Planner initialized with GPT-4')\r\n\r\n    def _build_system_prompt(self):\r\n        \"\"\"Create system prompt that constrains LLM to robot domain\"\"\"\r\n        return f\"\"\"You are an intelligent robot planning system. Your role is to understand human commands in natural language and convert them into executable robot actions.\r\n\r\nRobot Capabilities:\r\n- Movements: {', '.join(self.robot_capabilities['movements'])}\r\n- Actions: {', '.join(self.robot_capabilities['actions'])}\r\n- Sensors: {', '.join(self.robot_capabilities['sensors'])}\r\n- Max speed: {self.robot_capabilities['max_speed']} m/s\r\n- Gripper force: {self.robot_capabilities['gripper_force']} N\r\n\r\nResponse Format: You must respond with a JSON object containing:\r\n1. \"reasoning\": Your explanation of the command (1-2 sentences)\r\n2. \"actions\": A list of sequential actions, each with:\r\n   - \"type\": Action type (movement, sensor, manipulation)\r\n   - \"params\": Relevant parameters\r\n   - \"duration_ms\": Expected duration (optional)\r\n3. \"safety_checks\": List of pre-execution safety checks\r\n4. \"expected_outcome\": What should happen if successful\r\n\r\nExample response format:\r\n{{\r\n  \"reasoning\": \"Move to the table and grasp the red cube\",\r\n  \"actions\": [\r\n    {{\"type\": \"move_forward\", \"distance_m\": 2.0}},\r\n    {{\"type\": \"look_around\", \"scan_height\": \"table_level\"}},\r\n    {{\"type\": \"grasp\", \"duration_ms\": 1000}}\r\n  ],\r\n  \"safety_checks\": [\"Check path is clear\", \"Verify gripper is empty\"],\r\n  \"expected_outcome\": \"Red cube grasped and lifted\"\r\n}}\r\n\r\nAlways prioritize safety and feasibility. If a command seems impossible, explain why.\"\"\"\r\n\r\n    def command_callback(self, msg):\r\n        \"\"\"Process human command and generate plan\"\"\"\r\n        command = msg.data\r\n        self.get_logger().info(f'Received command: {command}')\r\n\r\n        try:\r\n            # Add user message to history\r\n            self.conversation_history.append({\r\n                'role': 'user',\r\n                'content': command\r\n            })\r\n\r\n            # Call GPT-4 with context\r\n            response = self.client.chat.completions.create(\r\n                model=self.model,\r\n                messages=[\r\n                    {'role': 'system', 'content': self.system_prompt}\r\n                ] + self.conversation_history,\r\n                temperature=0.7,  # Balanced: creative but consistent\r\n                max_tokens=1000,\r\n                response_format={'type': 'json_object'}\r\n            )\r\n\r\n            # Extract response\r\n            response_text = response.choices[0].message.content\r\n            plan = json.loads(response_text)\r\n\r\n            # Add assistant response to history\r\n            self.conversation_history.append({\r\n                'role': 'assistant',\r\n                'content': response_text\r\n            })\r\n\r\n            # Limit history to last 10 exchanges (to manage token count)\r\n            if len(self.conversation_history) > 20:\r\n                self.conversation_history = self.conversation_history[-20:]\r\n\r\n            # Publish plan\r\n            plan_msg = String()\r\n            plan_msg.data = json.dumps(plan)\r\n            self.plan_pub.publish(plan_msg)\r\n\r\n            # Publish explanation\r\n            explanation_msg = String()\r\n            explanation_msg.data = plan['reasoning']\r\n            self.explanation_pub.publish(explanation_msg)\r\n\r\n            # Log statistics\r\n            self.get_logger().info(\r\n                f'Plan generated: {len(plan[\"actions\"])} actions, '\r\n                f'Tokens used: {response.usage.total_tokens}'\r\n            )\r\n\r\n        except json.JSONDecodeError:\r\n            self.get_logger().error('LLM response was not valid JSON')\r\n        except Exception as e:\r\n            self.get_logger().error(f'LLM error: {str(e)}')\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    planner = LLMRobotPlanner()\r\n    rclpy.spin(planner)\r\n    rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Usage:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Terminal 1: Start LLM planner\r\nexport OPENAI_API_KEY="sk-proj-..."\r\nros2 run my_robot llm_planner.py\r\n\r\n# Terminal 2: Send command\r\nros2 topic pub /human/command std_msgs/String "data: \'Move forward 2 meters and look for red objects\'"\r\n\r\n# Terminal 3: Monitor output\r\nros2 topic echo /robot/plan\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"part-3-open-source-llm-deployment-with-ollama",children:"Part 3: Open-Source LLM Deployment with Ollama"}),"\n",(0,s.jsx)(n.h3,{id:"installing-ollama-on-jetson",children:"Installing Ollama on Jetson"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Download Ollama (NVIDIA Jetson optimized)\r\ncurl https://ollama.ai/install.sh | sh\r\n\r\n# Start Ollama service\r\nollama serve\r\n\r\n# In another terminal, pull model\r\nollama pull mistral\r\n# Or smaller model for Jetson 8GB:\r\nollama pull phi\n"})}),"\n",(0,s.jsx)(n.h3,{id:"local-llm-ros-2-node",children:"Local LLM ROS 2 Node"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\r\n\"\"\"\r\nLocal LLM integration using Ollama\r\nNo API costs, zero latency from network, complete privacy\r\n\"\"\"\r\n\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import String\r\nimport json\r\nimport requests\r\nimport time\r\n\r\nclass LocalLLMPlanner(Node):\r\n    def __init__(self):\r\n        super().__init__('local_llm_planner')\r\n\r\n        self.ollama_url = 'http://localhost:11434/api/generate'\r\n        self.model = 'phi'  # Fast 3B model for Jetson\r\n        # Alternative: 'mistral' (7B, better quality but slower)\r\n        # Alternative: 'neural-chat' (7B, optimized for dialogue)\r\n\r\n        self.command_sub = self.create_subscription(\r\n            String,\r\n            '/human/command',\r\n            self.command_callback,\r\n            10\r\n        )\r\n\r\n        self.plan_pub = self.create_publisher(String, '/robot/plan', 10)\r\n\r\n        # Check Ollama availability\r\n        try:\r\n            response = requests.get(\r\n                'http://localhost:11434/api/tags',\r\n                timeout=5\r\n            )\r\n            self.get_logger().info('Ollama service available')\r\n        except:\r\n            self.get_logger().error(\r\n                'Ollama not running. Run: ollama serve'\r\n            )\r\n\r\n    def command_callback(self, msg):\r\n        \"\"\"Process command with local LLM\"\"\"\r\n        command = msg.data\r\n        self.get_logger().info(f'Processing: {command}')\r\n\r\n        prompt = f\"\"\"You are a robot planning system. Generate a JSON action plan.\r\nRobot capabilities: move forward/backward, turn, grasp, release\r\n\r\nCommand: {command}\r\n\r\nRespond with:\r\n{{\r\n  \"reasoning\": \"explanation\",\r\n  \"actions\": [\r\n    {{\"type\": \"action_type\", \"params\": {{...}}}}\r\n  ]\r\n}}\"\"\"\r\n\r\n        try:\r\n            start_time = time.time()\r\n\r\n            # Call local Ollama\r\n            response = requests.post(\r\n                self.ollama_url,\r\n                json={\r\n                    'model': self.model,\r\n                    'prompt': prompt,\r\n                    'stream': False,\r\n                },\r\n                timeout=30\r\n            )\r\n\r\n            latency = (time.time() - start_time) * 1000\r\n\r\n            if response.status_code == 200:\r\n                result = response.json()\r\n                plan_text = result['response']\r\n\r\n                # Extract JSON from response\r\n                try:\r\n                    plan = json.loads(plan_text)\r\n                    plan_msg = String()\r\n                    plan_msg.data = json.dumps(plan)\r\n                    self.plan_pub.publish(plan_msg)\r\n\r\n                    self.get_logger().info(\r\n                        f'Plan generated in {latency:.1f}ms'\r\n                    )\r\n                except:\r\n                    self.get_logger().warn(\r\n                        f'Could not parse LLM response: {plan_text[:100]}'\r\n                    )\r\n            else:\r\n                self.get_logger().error(\r\n                    f'Ollama error: {response.status_code}'\r\n                )\r\n\r\n        except requests.exceptions.Timeout:\r\n            self.get_logger().error('Ollama request timeout (>30s)')\r\n        except Exception as e:\r\n            self.get_logger().error(f'Error: {str(e)}')\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    planner = LocalLLMPlanner()\r\n    rclpy.spin(planner)\r\n    rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"part-4-prompt-engineering-for-robotic-tasks",children:"Part 4: Prompt Engineering for Robotic Tasks"}),"\n",(0,s.jsx)(n.h3,{id:"template-task-planning-prompt",children:"Template: Task Planning Prompt"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"def build_task_planning_prompt(task, robot_state, environment):\r\n    \"\"\"Generate a prompt for multi-step task planning\"\"\"\r\n\r\n    return f\"\"\"You are an expert robot task planner.\r\n\r\nCURRENT STATE:\r\n- Robot location: {robot_state['position']}\r\n- Gripper: {'holding ' + robot_state['held_object'] if robot_state['held_object'] else 'empty'}\r\n- Battery: {robot_state['battery_percent']}%\r\n- Detected objects: {', '.join(robot_state['visible_objects'])}\r\n\r\nENVIRONMENT:\r\n- Floor type: {environment['floor_type']}\r\n- Obstacles: {', '.join(environment['obstacles'])}\r\n- Safe zones: {', '.join(environment['safe_zones'])}\r\n\r\nTASK: {task}\r\n\r\nCONSTRAINTS:\r\n1. Movements must be feasible (no moving through walls)\r\n2. Only interact with detected objects\r\n3. Ensure battery level > 20% to complete task\r\n4. Verify gripper force sufficient for object weight\r\n\r\nGenerate step-by-step action plan with safety verification.\"\"\"\r\n\r\n# Usage\r\ntask = \"Pick up the blue cube from the table and place it on the shelf\"\r\nrobot_state = {{\r\n    'position': [0.0, 0.0],\r\n    'held_object': None,\r\n    'battery_percent': 75,\r\n    'visible_objects': ['blue cube', 'table', 'shelf']\r\n}}\r\nenvironment = {{\r\n    'floor_type': 'tile',\r\n    'obstacles': ['chair', 'wall'],\r\n    'safe_zones': ['open floor', 'shelf area']\r\n}}\r\n\r\nprompt = build_task_planning_prompt(task, robot_state, environment)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"template-safety-verification-prompt",children:"Template: Safety Verification Prompt"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'def build_safety_verification_prompt(plan, robot_limits):\r\n    """Verify plan safety before execution"""\r\n\r\n    return f"""Review this robot action plan for safety violations.\r\n\r\nPLAN:\r\n{json.dumps(plan, indent=2)}\r\n\r\nROBOT LIMITS:\r\n- Max linear speed: {robot_limits[\'max_speed\']} m/s\r\n- Max angular speed: {robot_limits[\'max_angular\']} rad/s\r\n- Gripper force: {robot_limits[\'gripper_force\']} N (max)\r\n- Reach radius: {robot_limits[\'reach_radius\']} m\r\n\r\nSAFETY CHECKS:\r\n1. Does plan exceed speed limits? YES/NO\r\n2. Does plan ask gripper to exceed force? YES/NO\r\n3. Are movements within reach radius? YES/NO\r\n4. Could plan harm humans nearby? YES/NO\r\n\r\nIf any check is NO, provide corrected plan."""\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"part-5-handling-llm-failure-cases",children:"Part 5: Handling LLM Failure Cases"}),"\n",(0,s.jsx)(n.h3,{id:"fallback-strategies",children:"Fallback Strategies"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"class RobustLLMPlanner(Node):\r\n    def __init__(self):\r\n        super().__init__('robust_llm_planner')\r\n        self.fallback_strategies = [\r\n            self.try_gpt4,           # Primary\r\n            self.try_gpt35,          # Secondary (faster, cheaper)\r\n            self.try_ollama,         # Tertiary (local backup)\r\n            self.hardcoded_actions   # Final fallback (always works)\r\n        ]\r\n\r\n    def process_command_with_fallback(self, command):\r\n        \"\"\"Try LLM methods in priority order\"\"\"\r\n\r\n        for strategy in self.fallback_strategies:\r\n            try:\r\n                plan = strategy(command)\r\n                if plan:\r\n                    self.get_logger().info(\r\n                        f'Generated plan using {strategy.__name__}'\r\n                    )\r\n                    return plan\r\n            except Exception as e:\r\n                self.get_logger().warn(\r\n                    f'{strategy.__name__} failed: {str(e)}'\r\n                )\r\n                continue\r\n\r\n        # All strategies failed\r\n        self.get_logger().error('All LLM strategies failed!')\r\n        return None\r\n\r\n    def hardcoded_actions(self, command):\r\n        \"\"\"Fallback: Match against known patterns\"\"\"\r\n        patterns = {\r\n            'move': {'type': 'move_forward', 'distance': 1.0},\r\n            'stop': {'type': 'stop'},\r\n            'grasp': {'type': 'grasp'},\r\n            'release': {'type': 'release'}\r\n        }\r\n\r\n        for keyword, action in patterns.items():\r\n            if keyword in command.lower():\r\n                return {'actions': [action], 'source': 'hardcoded'}\r\n\r\n        return None\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"part-6-cost-optimization-strategies",children:"Part 6: Cost Optimization Strategies"}),"\n",(0,s.jsx)(n.h3,{id:"token-budget-management",children:"Token Budget Management"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"class TokenBudgetManager:\r\n    def __init__(self, daily_budget_dollars=5.0):\r\n        self.daily_budget = daily_budget_dollars\r\n        self.tokens_used_today = 0\r\n        self.cost_so_far = 0.0\r\n\r\n    def estimate_cost(self, input_tokens, output_tokens, model='gpt-4-turbo'):\r\n        \"\"\"Estimate API cost before making call\"\"\"\r\n        # Prices per 1K tokens\r\n        prices = {\r\n            'gpt-4-turbo': {'input': 0.01, 'output': 0.03},\r\n            'gpt-3.5-turbo': {'input': 0.0005, 'output': 0.0015},\r\n            'claude-3': {'input': 0.003, 'output': 0.015}\r\n        }\r\n\r\n        rate = prices.get(model, prices['gpt-3.5-turbo'])\r\n        cost = (input_tokens * rate['input'] +\r\n                output_tokens * rate['output']) / 1000\r\n\r\n        return cost\r\n\r\n    def should_call_llm(self, estimated_cost):\r\n        \"\"\"Check if we're within budget\"\"\"\r\n        if self.cost_so_far + estimated_cost > self.daily_budget:\r\n            self.logger.warn(\r\n                f'Would exceed daily budget. Cost: ${estimated_cost:.3f}, '\r\n                f'Used: ${self.cost_so_far:.2f}, Budget: ${self.daily_budget}'\r\n            )\r\n            return False\r\n        return True\r\n\r\n    def log_usage(self, input_tokens, output_tokens, model):\r\n        \"\"\"Track daily usage\"\"\"\r\n        cost = self.estimate_cost(input_tokens, output_tokens, model)\r\n        self.tokens_used_today += input_tokens + output_tokens\r\n        self.cost_so_far += cost\r\n\r\n        self.logger.info(\r\n            f'API used: ${cost:.4f} | Daily: ${self.cost_so_far:.2f} / '\r\n            f'${self.daily_budget} | Tokens: {self.tokens_used_today}'\r\n        )\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"hands-on-exercise-build-your-first-llm-powered-robot",children:"Hands-On Exercise: Build Your First LLM-Powered Robot"}),"\n",(0,s.jsx)(n.h3,{id:"exercise-1-simple-command-to-action-conversion",children:"Exercise 1: Simple Command-to-Action Conversion"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Terminal 1: Start LLM node\r\nros2 run my_robot llm_planner.py\r\n\r\n# Terminal 2: Test various commands\r\nros2 topic pub /human/command std_msgs/String \"data: 'Move forward 1 meter'\"\r\nros2 topic pub /human/command std_msgs/String \"data: 'Look left and detect objects'\"\r\nros2 topic pub /human/command std_msgs/String \"data: 'Pick up the red cube from the table'\"\r\n\r\n# Terminal 3: Monitor generated plans\r\nros2 topic echo /robot/plan | head -20\r\n# You should see JSON with actions, reasoning, safety checks\n"})}),"\n",(0,s.jsx)(n.h3,{id:"exercise-2-create-custom-robot-instruction-set",children:"Exercise 2: Create Custom Robot Instruction Set"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\r\n# Create a domain-specific language for your robot\r\n\r\nROBOT_ACTIONS = {\r\n    'goto': {'params': ['x', 'y'], 'duration': 3000},\r\n    'grasp': {'params': ['object_id'], 'duration': 1000},\r\n    'release': {'params': [], 'duration': 500},\r\n    'scan': {'params': ['radius'], 'duration': 2000},\r\n    'wait': {'params': ['seconds'], 'duration': None}\r\n}\r\n\r\n# Create instruction set prompt\r\ninstruction_set = \"\"\"\r\nValid robot actions:\r\n- goto(x, y): Move to coordinate (x, y)\r\n- grasp(object): Close gripper around object\r\n- release(): Open gripper\r\n- scan(radius): Detect objects within radius meters\r\n- wait(seconds): Pause execution\r\n\r\nExample: [scan(2.0), grasp('red_cube'), goto(1.0, 1.0), release()]\r\n\"\"\"\r\n\r\n# Teach LLM about your action language\r\nprompt = f\"\"\"You are translating human commands to robot actions.\r\n{instruction_set}\r\n\r\nUser command: 'Pick up the object on the table'\r\n\r\nOutput the action sequence in the format:\r\n[action_name(param1, param2), action_name(param1)]\r\n\"\"\"\r\n\r\n# Test different LLM models\r\nmodels_to_test = ['gpt-4', 'gpt-3.5-turbo', 'local:phi']\r\nfor model in models_to_test:\r\n    response = call_llm(prompt, model)\r\n    actions = parse_action_sequence(response)\r\n    print(f'{model}: {actions}')\n"})}),"\n",(0,s.jsx)(n.h3,{id:"exercise-3-monitor-and-optimize-llm-latency",children:"Exercise 3: Monitor and Optimize LLM Latency"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Create a benchmarking script\r\npython3 benchmark_llm_latency.py \\\r\n  --model gpt-4 \\\r\n  --iterations 10 \\\r\n  --input-length 100 \\\r\n  --output-length 500\r\n\r\n# Expected output:\r\n# GPT-4 Turbo:\r\n#   Min latency: 180ms\r\n#   Max latency: 520ms\r\n#   Avg latency: 340ms\r\n#   P95 latency: 480ms\r\n#   Tokens/sec: 125\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"common-llm-integration-errors--debugging",children:"Common LLM Integration Errors & Debugging"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Error"}),(0,s.jsx)(n.th,{children:"Cause"}),(0,s.jsx)(n.th,{children:"Fix"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:'"API key invalid"'})}),(0,s.jsx)(n.td,{children:"Expired or revoked key"}),(0,s.jsxs)(n.td,{children:["Run ",(0,s.jsx)(n.code,{children:'export OPENAI_API_KEY="sk-..."'})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:'"Rate limit exceeded"'})}),(0,s.jsx)(n.td,{children:"Too many requests per minute"}),(0,s.jsx)(n.td,{children:"Implement request queuing, backoff strategy"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"JSON parsing error"})}),(0,s.jsx)(n.td,{children:"LLM output not valid JSON"}),(0,s.jsx)(n.td,{children:"Add JSON validation, use response_format='json'"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Timeout (>30s)"})}),(0,s.jsx)(n.td,{children:"Network latency or LLM overloaded"}),(0,s.jsx)(n.td,{children:"Add retry logic, use faster model (GPT-3.5)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:'"Context window exceeded"'})}),(0,s.jsx)(n.td,{children:"Conversation history too long"}),(0,s.jsx)(n.td,{children:"Trim history to last 10-15 exchanges"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Offline (Ollama)"})}),(0,s.jsx)(n.td,{children:"Local LLM service not running"}),(0,s.jsxs)(n.td,{children:["Run ",(0,s.jsx)(n.code,{children:"ollama serve"})," in separate terminal"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Memory OOM (Ollama)"})}),(0,s.jsx)(n.td,{children:"Model too large for Jetson"}),(0,s.jsx)(n.td,{children:"Use smaller model (phi 3B instead of Mistral 7B)"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"LLM Architecture for Robots"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"LLMs are powerful for natural language understanding and reasoning"}),"\n",(0,s.jsx)(n.li,{children:"Cloud LLMs (GPT-4) offer best quality but require internet"}),"\n",(0,s.jsx)(n.li,{children:"Local LLMs (Ollama) offer privacy and offline capability but lower quality"}),"\n",(0,s.jsx)(n.li,{children:"Hybrid approach: Use cloud for complex reasoning, local for routine commands"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Prompt Engineering is Critical"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Define robot capabilities explicitly in system prompt"}),"\n",(0,s.jsx)(n.li,{children:"Provide examples of desired output format (JSON)"}),"\n",(0,s.jsx)(n.li,{children:"Include safety constraints and verification checks"}),"\n",(0,s.jsx)(n.li,{children:"Limit context window to manage token costs"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Real-Time Integration Requires Careful Design"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Latency budgets vary by use case (planning: 200-500ms, reactive: 50-100ms)"}),"\n",(0,s.jsx)(n.li,{children:"Implement fallback strategies for API failures"}),"\n",(0,s.jsx)(n.li,{children:"Monitor token usage and set daily budgets"}),"\n",(0,s.jsx)(n.li,{children:"Cache frequent responses to reduce API calls"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Cost Management for Cloud APIs"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"GPT-4 costs ~$0.06 per 5-minute conversation"}),"\n",(0,s.jsx)(n.li,{children:"GPT-3.5 is 60\xd7 cheaper but less capable"}),"\n",(0,s.jsx)(n.li,{children:"Compress prompts and responses to reduce token count"}),"\n",(0,s.jsx)(n.li,{children:"Consider local LLM for high-volume deployments"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Robot Task Planning with LLMs"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use structured prompts with state and constraints"}),"\n",(0,s.jsx)(n.li,{children:"Verify generated plans before execution"}),"\n",(0,s.jsx)(n.li,{children:"Handle failures gracefully with hardcoded fallback actions"}),"\n",(0,s.jsx)(n.li,{children:"Maintain conversation history for context awareness"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,s.jsx)(n.h3,{id:"official-documentation",children:"Official Documentation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://platform.openai.com/docs/",children:"OpenAI API Documentation"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://ollama.ai/library",children:"Ollama Model Library"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://ai.google.dev/",children:"Google Gemini API"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://console.anthropic.com/",children:"Anthropic Claude API"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"research-papers",children:"Research Papers"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://arxiv.org/abs/2303.08774",children:"GPT-4 Technical Report"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://arxiv.org/abs/2202.07539",children:"Prompting as a Fundamental Capability of LLMs"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://arxiv.org/abs/2201.11903",children:"Chain-of-Thought Prompting"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://arxiv.org/abs/2210.03629",children:"ReAct: Synergizing Reasoning and Acting in LLMs"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"robotics-integration",children:"Robotics Integration"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.ros.org/en/humble/",children:"ROS 2 Official Tutorials"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://arxiv.org/abs/2301.04871",children:"Language Models for Robot Planning"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://arxiv.org/abs/2304.07978",children:"Embodied AI and Language Models"})}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"next-lesson",children:"Next Lesson"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Lesson 4.2: Conversational AI & Vision-Language-Action (VLA)"})}),"\n",(0,s.jsx)(n.p,{children:"Now that your robot has a cognitive core (LLMs), we'll add multimodal perception and action. You'll learn:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Integrate vision inputs with language models (vision-language models)"}),"\n",(0,s.jsx)(n.li,{children:"Build multimodal prompts combining images and text"}),"\n",(0,s.jsx)(n.li,{children:"Deploy VLA models (Llava, GPT-4V) for real-world understanding"}),"\n",(0,s.jsx)(n.li,{children:"Create conversational robots that see and understand their environment"}),"\n",(0,s.jsx)(n.li,{children:"Process robot actions from multimodal reasoning"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example Integrated System:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'User (voice): "What\'s on the table?"\r\n    \u2193\r\n[Speech-to-text] \u2192 "What\'s on the table?"\r\n    \u2193\r\n[Robot Camera] \u2192 Captures image of table\r\n    \u2193\r\n[Vision-Language Model]\r\n\u251c\u2500 Input: Image + Question\r\n\u251c\u2500 Process: Understand scene with visual context\r\n\u251c\u2500 Output: "I see a red cube, a blue sphere, and a green cylinder"\r\n    \u2193\r\n[LLM Task Planning]\r\n\u251c\u2500 Input: "What\'s on the table?" + Visual understanding\r\n\u251c\u2500 Output: Action plan\r\n    \u2193\r\n[Text-to-Speech] \u2192 "I see a red cube, a blue sphere, and a green cylinder"\r\n    \u2193\r\nRobot speaks response to user\n'})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);