"use strict";(self.webpackChunkphysical_ai_textbook=self.webpackChunkphysical_ai_textbook||[]).push([[311],{1647:function(e,n,s){s.r(n),s.d(n,{assets:function(){return c},contentTitle:function(){return t},default:function(){return h},frontMatter:function(){return l},metadata:function(){return i},toc:function(){return d}});var i=JSON.parse('{"id":"chapter-1/1-3-rclpy-packages","title":"Building rclpy Packages and Launch Files","description":"Learn how to structure ROS 2 Python packages and create launch files for multi-node systems","source":"@site/docs/chapter-1/1-3-rclpy-packages.md","sourceDirName":"chapter-1","slug":"/chapter-1/1-3-rclpy-packages","permalink":"/physical-ai-textbook/docs/chapter-1/1-3-rclpy-packages","draft":false,"unlisted":false,"editUrl":"https://github.com/Bil4l-Mehmood/physical-ai-textbook/edit/main/docs/chapter-1/1-3-rclpy-packages.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"sidebar_label":"Lesson 1.3: rclpy Packages & Launch","title":"Building rclpy Packages and Launch Files","description":"Learn how to structure ROS 2 Python packages and create launch files for multi-node systems","duration":90,"difficulty":"Intermediate","hardware":["Jetson Orin Nano","ROS 2 Humble"],"prerequisites":["Lesson 1.2: ROS 2 Core Concepts"]},"sidebar":"tutorialSidebar","previous":{"title":"Lesson 1.2: ROS 2 Core Concepts","permalink":"/physical-ai-textbook/docs/chapter-1/1-2-ros2-core"},"next":{"title":"Lesson 1.4: URDF/XACRO Basics","permalink":"/physical-ai-textbook/docs/chapter-1/1-4-urdf-xacro"}}'),r=s(4848),a=s(8453);const l={sidebar_position:3,sidebar_label:"Lesson 1.3: rclpy Packages & Launch",title:"Building rclpy Packages and Launch Files",description:"Learn how to structure ROS 2 Python packages and create launch files for multi-node systems",duration:90,difficulty:"Intermediate",hardware:["Jetson Orin Nano","ROS 2 Humble"],prerequisites:["Lesson 1.2: ROS 2 Core Concepts"]},t="Lesson 1.3: Building rclpy Packages and Launch Files",c={},d=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Hardware &amp; Prerequisites",id:"hardware--prerequisites",level:2},{value:"ROS 2 Package Structure",id:"ros-2-package-structure",level:2},{value:"The <code>package.xml</code> File",id:"the-packagexml-file",level:3},{value:"The <code>setup.py</code> File",id:"the-setuppy-file",level:3},{value:"Creating a ROS 2 Package",id:"creating-a-ros-2-package",level:2},{value:"Step 1: Create Package Structure",id:"step-1-create-package-structure",level:3},{value:"Step 2: Create Node Files",id:"step-2-create-node-files",level:3},{value:"Step 3: Update <code>setup.py</code>",id:"step-3-update-setuppy",level:3},{value:"Step 4: Build the Package",id:"step-4-build-the-package",level:3},{value:"Launch Files",id:"launch-files",level:2},{value:"Creating a Python Launch File",id:"creating-a-python-launch-file",level:3},{value:"Using the Launch File",id:"using-the-launch-file",level:3},{value:"Complete Example: Multi-Node Package",id:"complete-example-multi-node-package",level:2},{value:"Full Package Listing",id:"full-package-listing",level:3},{value:"Complete Code Files",id:"complete-code-files",level:3},{value:"Hands-On Exercise",id:"hands-on-exercise",level:2},{value:"Step-by-Step Instructions",id:"step-by-step-instructions",level:3},{value:"1. Create Package",id:"1-create-package",level:4},{value:"2. Create Nodes",id:"2-create-nodes",level:4},{value:"3. Update setup.py",id:"3-update-setuppy",level:4},{value:"4. Create Launch Directory and File",id:"4-create-launch-directory-and-file",level:4},{value:"5. Build Package",id:"5-build-package",level:4},{value:"6. Run Launch File",id:"6-run-launch-file",level:4},{value:"Testing",id:"testing",level:3},{value:"Exercises",id:"exercises",level:3},{value:"Common Errors &amp; Fixes",id:"common-errors--fixes",level:2},{value:"Key Takeaways",id:"key-takeaways",level:2},{value:"Further Reading",id:"further-reading",level:2}];function o(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"lesson-13-building-rclpy-packages-and-launch-files",children:"Lesson 1.3: Building rclpy Packages and Launch Files"})}),"\n",(0,r.jsxs)(n.admonition,{title:"Lesson Overview",type:"info",children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Duration"}),": 90 minutes | ",(0,r.jsx)(n.strong,{children:"Difficulty"}),": Intermediate | ",(0,r.jsx)(n.strong,{children:"Hardware"}),": Jetson Orin Nano + ROS 2 Humble"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Prerequisites"}),": Complete Lesson 1.2 (ROS 2 Core Concepts)"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Learning Outcome"}),": Understand ROS 2 package structure and create launch files to manage multi-node systems"]})]}),"\n",(0,r.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,r.jsx)(n.p,{children:"By the end of this lesson, you will be able to:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Understand the ROS 2 package directory structure and conventions"}),"\n",(0,r.jsxs)(n.li,{children:["Create a Python ROS 2 package with proper ",(0,r.jsx)(n.code,{children:"package.xml"})," and ",(0,r.jsx)(n.code,{children:"setup.py"})]}),"\n",(0,r.jsxs)(n.li,{children:["Write ROS 2 launch files in Python (",(0,r.jsx)(n.code,{children:".launch.py"}),")"]}),"\n",(0,r.jsx)(n.li,{children:"Manage multiple nodes and configure node parameters"}),"\n",(0,r.jsx)(n.li,{children:"Use environment variables and remapping in launch files"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"hardware--prerequisites",children:"Hardware & Prerequisites"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Required Hardware"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"NVIDIA Jetson Orin Nano with ROS 2 Humble installed"}),"\n",(0,r.jsx)(n.li,{children:"Development environment (SSH or local terminal)"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Required Software"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"ROS 2 Humble (or newer)"}),"\n",(0,r.jsx)(n.li,{children:"Python 3.10+"}),"\n",(0,r.jsx)(n.li,{children:"colcon build system"}),"\n",(0,r.jsx)(n.li,{children:"Text editor (nano, vim, or VS Code)"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Verification"}),": Confirm ROS 2 is installed"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 --version\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Expected output: ",(0,r.jsx)(n.code,{children:"ROS 2 Humble"})]}),"\n",(0,r.jsx)(n.h2,{id:"ros-2-package-structure",children:"ROS 2 Package Structure"}),"\n",(0,r.jsxs)(n.admonition,{title:"Package Anatomy",type:"note",children:[(0,r.jsx)(n.p,{children:"A ROS 2 Python package contains:"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"package.xml"})," - Package metadata and dependencies"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"setup.py"})," - Python installation configuration"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"setup.cfg"})," - Setup configuration file"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"resource/"})," - Package resources"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"{package_name}/"})," - Python source code directory"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"launch/"})," - Launch file directory"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"test/"})," - Unit tests directory"]}),"\n"]})]}),"\n",(0,r.jsxs)(n.h3,{id:"the-packagexml-file",children:["The ",(0,r.jsx)(n.code,{children:"package.xml"})," File"]}),"\n",(0,r.jsxs)(n.p,{children:["Every ROS 2 package starts with ",(0,r.jsx)(n.code,{children:"package.xml"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\n<package format="3">\n  <name>my_ros2_package</name>\n  <version>0.0.1</version>\n  <description>My first ROS 2 package</description>\n  <maintainer email="user@example.com">User Name</maintainer>\n  <license>Apache License 2.0</license>\n\n  \x3c!-- Build dependencies --\x3e\n  <build_depend>rclpy</build_depend>\n  <build_depend>std_msgs</build_depend>\n\n  \x3c!-- Runtime dependencies --\x3e\n  <exec_depend>rclpy</exec_depend>\n  <exec_depend>std_msgs</exec_depend>\n\n  <buildtool_depend>ament_python</buildtool_depend>\n</package>\n'})}),"\n",(0,r.jsxs)(n.h3,{id:"the-setuppy-file",children:["The ",(0,r.jsx)(n.code,{children:"setup.py"})," File"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from setuptools import setup\n\nsetup(\n    name='my_ros2_package',\n    version='0.0.1',\n    packages=['my_ros2_package'],\n    py_modules=[],\n    install_requires=['setuptools'],\n    author='Your Name',\n    author_email='user@example.com',\n    description='My first ROS 2 package',\n    license='Apache License 2.0',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'talker = my_ros2_package.publisher:main',\n            'listener = my_ros2_package.subscriber:main',\n        ],\n    },\n)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"creating-a-ros-2-package",children:"Creating a ROS 2 Package"}),"\n",(0,r.jsx)(n.h3,{id:"step-1-create-package-structure",children:"Step 1: Create Package Structure"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Navigate to ROS 2 workspace\ncd ~/ros2_ws/src\n\n# Create a new package\nros2 pkg create --build-type ament_python my_first_package\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-2-create-node-files",children:"Step 2: Create Node Files"}),"\n",(0,r.jsxs)(n.p,{children:["Create ",(0,r.jsx)(n.code,{children:"my_first_package/my_first_package/talker.py"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\n# Jetson Orin Nano target - ROS 2 Humble\n\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\n\nclass MinimalPublisher(Node):\n    def __init__(self):\n        super().__init__('minimal_publisher')\n        self.publisher_ = self.create_publisher(String, 'topic', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = f'Hello ROS 2: {self.i}'\n        self.publisher_.publish(msg)\n        self.get_logger().info(f'Publishing: \"{msg.data}\"')\n        self.i += 1\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n    minimal_publisher = MinimalPublisher()\n    rclpy.spin(minimal_publisher)\n    minimal_publisher.destroy_node()\n    rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"step-3-update-setuppy",children:["Step 3: Update ",(0,r.jsx)(n.code,{children:"setup.py"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"entry_points={\n    'console_scripts': [\n        'talker = my_first_package.talker:main',\n    ],\n},\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-4-build-the-package",children:"Step 4: Build the Package"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# From workspace root\ncd ~/ros2_ws\ncolcon build --packages-select my_first_package\nsource install/setup.bash\n"})}),"\n",(0,r.jsx)(n.h2,{id:"launch-files",children:"Launch Files"}),"\n",(0,r.jsxs)(n.admonition,{title:"Launch File Purpose",type:"tip",children:[(0,r.jsx)(n.p,{children:"Launch files manage complex multi-node systems by:"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Starting multiple nodes"}),"\n",(0,r.jsx)(n.li,{children:"Setting parameters"}),"\n",(0,r.jsx)(n.li,{children:"Remapping topics"}),"\n",(0,r.jsx)(n.li,{children:"Managing node lifecycle"}),"\n"]})]}),"\n",(0,r.jsx)(n.h3,{id:"creating-a-python-launch-file",children:"Creating a Python Launch File"}),"\n",(0,r.jsxs)(n.p,{children:["Create ",(0,r.jsx)(n.code,{children:"my_first_package/launch/talker_listener.launch.py"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\n# Jetson Orin Nano target - ROS 2 Humble\n\nfrom launch import LaunchDescription\nfrom launch_ros.actions import Node\n\n\ndef generate_launch_description():\n    return LaunchDescription([\n        Node(\n            package='my_first_package',\n            executable='talker',\n            name='talker_node',\n            remappings=[\n                ('topic', 'chatter'),\n            ],\n        ),\n        Node(\n            package='my_first_package',\n            executable='listener',\n            name='listener_node',\n            remappings=[\n                ('topic', 'chatter'),\n            ],\n        ),\n    ])\n"})}),"\n",(0,r.jsx)(n.h3,{id:"using-the-launch-file",children:"Using the Launch File"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 launch my_first_package talker_listener.launch.py\n"})}),"\n",(0,r.jsx)(n.h2,{id:"complete-example-multi-node-package",children:"Complete Example: Multi-Node Package"}),"\n",(0,r.jsx)(n.h3,{id:"full-package-listing",children:"Full Package Listing"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"lesson_1_3_package/\n\u251c\u2500\u2500 package.xml                        # Package metadata\n\u251c\u2500\u2500 setup.py                           # Python setup\n\u251c\u2500\u2500 setup.cfg                          # Setup configuration\n\u251c\u2500\u2500 lesson_1_3_package/\n\u2502   \u251c\u2500\u2500 __init__.py                   # Python package marker\n\u2502   \u251c\u2500\u2500 talker.py                     # Publisher node\n\u2502   \u2514\u2500\u2500 listener.py                   # Subscriber node\n\u2514\u2500\u2500 launch/\n    \u2514\u2500\u2500 talker_listener.launch.py      # Launch file\n"})}),"\n",(0,r.jsx)(n.h3,{id:"complete-code-files",children:"Complete Code Files"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"lesson_1_3_package/talker.py"})}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\n# Copyright (c) 2025 Physical AI Course\n# License: MIT\n# Target: NVIDIA Jetson Orin Nano - ROS 2 Humble\n\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\n\nclass MinimalPublisher(Node):\n    \"\"\"\n    A simple ROS 2 publisher in a reusable package.\n\n    This is the talker node - it publishes messages to the 'chatter' topic.\n    \"\"\"\n\n    def __init__(self):\n        super().__init__('talker')\n        self.publisher_ = self.create_publisher(String, 'chatter', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n        self.get_logger().info('Talker node started')\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = f'Hello ROS 2: {self.i}'\n        self.publisher_.publish(msg)\n        self.get_logger().info(f'Publishing: \"{msg.data}\"')\n        self.i += 1\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n    minimal_publisher = MinimalPublisher()\n    rclpy.spin(minimal_publisher)\n    minimal_publisher.destroy_node()\n    rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"lesson_1_3_package/listener.py"})}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\n# Copyright (c) 2025 Physical AI Course\n# License: MIT\n# Target: NVIDIA Jetson Orin Nano - ROS 2 Humble\n\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\n\nclass MinimalSubscriber(Node):\n    \"\"\"\n    A simple ROS 2 subscriber in a reusable package.\n\n    This is the listener node - it receives messages from the 'chatter' topic.\n    \"\"\"\n\n    def __init__(self):\n        super().__init__('listener')\n        self.subscription = self.create_subscription(\n            String,\n            'chatter',\n            self.listener_callback,\n            10)\n        self.subscription  # prevent unused variable warning\n        self.get_logger().info('Listener node started')\n\n    def listener_callback(self, msg):\n        self.get_logger().info(f'Heard: \"{msg.data}\"')\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n    minimal_subscriber = MinimalSubscriber()\n    rclpy.spin(minimal_subscriber)\n    minimal_subscriber.destroy_node()\n    rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"launch/talker_listener.launch.py"})}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\n# Copyright (c) 2025 Physical AI Course\n# License: MIT\n# Target: NVIDIA Jetson Orin Nano - ROS 2 Humble\n\nfrom launch import LaunchDescription\nfrom launch_ros.actions import Node\n\n\ndef generate_launch_description():\n    \"\"\"\n    Create launch description for talker and listener nodes.\n\n    This launch file starts both the publisher (talker) and subscriber (listener)\n    nodes, which communicate through the 'chatter' topic.\n    \"\"\"\n    return LaunchDescription([\n        # Start the talker node\n        Node(\n            package='lesson_1_3_package',\n            executable='talker',\n            name='talker_node',\n            output='screen',  # Show logs in terminal\n        ),\n        # Start the listener node\n        Node(\n            package='lesson_1_3_package',\n            executable='listener',\n            name='listener_node',\n            output='screen',  # Show logs in terminal\n        ),\n    ])\n"})}),"\n",(0,r.jsx)(n.h2,{id:"hands-on-exercise",children:"Hands-On Exercise"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Task"}),": Create a complete ROS 2 package with publisher and subscriber nodes, and a launch file to run both together."]}),"\n",(0,r.jsx)(n.h3,{id:"step-by-step-instructions",children:"Step-by-Step Instructions"}),"\n",(0,r.jsx)(n.h4,{id:"1-create-package",children:"1. Create Package"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src\nros2 pkg create --build-type ament_python lesson_1_3_package\ncd lesson_1_3_package\n"})}),"\n",(0,r.jsx)(n.h4,{id:"2-create-nodes",children:"2. Create Nodes"}),"\n",(0,r.jsx)(n.p,{children:"Copy the talker and listener code above into:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"lesson_1_3_package/talker.py"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"lesson_1_3_package/listener.py"})}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"3-update-setuppy",children:"3. Update setup.py"}),"\n",(0,r.jsxs)(n.p,{children:["Edit ",(0,r.jsx)(n.code,{children:"setup.py"})," to add entry points:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"entry_points={\n    'console_scripts': [\n        'talker = lesson_1_3_package.talker:main',\n        'listener = lesson_1_3_package.listener:main',\n    ],\n},\n"})}),"\n",(0,r.jsx)(n.h4,{id:"4-create-launch-directory-and-file",children:"4. Create Launch Directory and File"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"mkdir -p launch\n# Copy launch file code above to launch/talker_listener.launch.py\nchmod +x launch/talker_listener.launch.py\n"})}),"\n",(0,r.jsx)(n.h4,{id:"5-build-package",children:"5. Build Package"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\ncolcon build --packages-select lesson_1_3_package\nsource install/setup.bash\n"})}),"\n",(0,r.jsx)(n.h4,{id:"6-run-launch-file",children:"6. Run Launch File"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 launch lesson_1_3_package talker_listener.launch.py\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Expected Output"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"[INFO] [talker_node]: Talker node started\n[INFO] [listener_node]: Listener node started\n[INFO] [talker_node]: Publishing: 'Hello ROS 2: 0'\n[INFO] [listener_node]: Heard: 'Hello ROS 2: 0'\n[INFO] [talker_node]: Publishing: 'Hello ROS 2: 1'\n[INFO] [listener_node]: Heard: 'Hello ROS 2: 1'\n...\n"})}),"\n",(0,r.jsx)(n.h3,{id:"testing",children:"Testing"}),"\n",(0,r.jsx)(n.p,{children:"Verify the package works:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# List active nodes\nros2 node list\n# Output: /talker_node, /listener_node\n\n# List active topics\nros2 topic list\n# Output: /chatter, /parameter_events, /rosout\n\n# Monitor the topic\nros2 topic echo /chatter\n# Output: data: 'Hello ROS 2: 0', data: 'Hello ROS 2: 1', ...\n"})}),"\n",(0,r.jsx)(n.h3,{id:"exercises",children:"Exercises"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Modify topic name"}),": Change 'chatter' to '/my_robot_messages' in both nodes and launch file"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Change publish rate"}),": Edit timer_period in talker.py (try 0.2 for faster)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Add a third node"}),": Create a \"repeater\" node that subscribes to 'chatter', processes messages, and publishes to a new topic"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Add parameters"}),": Use ",(0,r.jsx)(n.code,{children:"declare_parameter"})," and ",(0,r.jsx)(n.code,{children:"get_parameter"})," to configure timer period from launch file"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Error handling"}),": Add try/except blocks and test graceful shutdown (Ctrl+C)"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"common-errors--fixes",children:"Common Errors & Fixes"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Error"}),(0,r.jsx)(n.th,{children:"Cause"}),(0,r.jsx)(n.th,{children:"Fix"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Package not found"})}),(0,r.jsx)(n.td,{children:"Package not built or sourced"}),(0,r.jsxs)(n.td,{children:["Run ",(0,r.jsx)(n.code,{children:"colcon build"})," and ",(0,r.jsx)(n.code,{children:"source install/setup.bash"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Could not find executable"})}),(0,r.jsxs)(n.td,{children:["Entry point not in ",(0,r.jsx)(n.code,{children:"setup.py"})]}),(0,r.jsxs)(n.td,{children:["Update ",(0,r.jsx)(n.code,{children:"setup.py"})," with correct node name"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Topic mismatch"})}),(0,r.jsx)(n.td,{children:"Publisher and subscriber on different topics"}),(0,r.jsxs)(n.td,{children:["Use ",(0,r.jsx)(n.code,{children:"remappings"})," in launch file or verify topic names match"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ModuleNotFoundError: No module named 'rclpy'"})}),(0,r.jsx)(n.td,{children:"ROS 2 not sourced"}),(0,r.jsxs)(n.td,{children:["Run ",(0,r.jsx)(n.code,{children:"source /opt/ros/humble/setup.bash"})]})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,r.jsxs)(n.p,{children:["\u2705 ROS 2 packages require ",(0,r.jsx)(n.code,{children:"package.xml"}),", ",(0,r.jsx)(n.code,{children:"setup.py"}),", and source code organized in a package directory"]}),"\n",(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.code,{children:"entry_points"})," in ",(0,r.jsx)(n.code,{children:"setup.py"})," define executables that can be run with ",(0,r.jsx)(n.code,{children:"ros2 run"})]}),"\n",(0,r.jsxs)(n.p,{children:["\u2705 Launch files (",(0,r.jsx)(n.code,{children:".launch.py"}),") manage complex multi-node systems and parameter configuration"]}),"\n",(0,r.jsxs)(n.p,{children:["\u2705 Use ",(0,r.jsx)(n.code,{children:"remappings"})," to dynamically change topic and service names without code changes"]}),"\n",(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.code,{children:"colcon build"})," compiles packages; remember to source the install setup.bash"]}),"\n",(0,r.jsx)(n.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\ud83d\udcd6 ",(0,r.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Concepts/Intermediate/About-ROS-2-Package-Creation.html",children:"ROS 2 Package Concepts"})]}),"\n",(0,r.jsxs)(n.li,{children:["\ud83d\udcd6 ",(0,r.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Concepts/Intermediate/Launch/Basic-Launch.html",children:"ROS 2 Launch Documentation"})]}),"\n",(0,r.jsxs)(n.li,{children:["\ud83d\udcd6 ",(0,r.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Tutorials/Beginner-Client-Libraries/Creating-Your-First-ROS2-Package.html",children:"ROS 2 Python Package Tutorial"})]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Ready for the next lesson?"})," Continue to ",(0,r.jsx)(n.a,{href:"1-4-urdf-xacro",children:"Lesson 1.4: URDF/XACRO Basics"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Have questions?"})," Check ",(0,r.jsx)(n.a,{href:"#common-errors--fixes",children:"Common Errors & Fixes"})," or ask in ",(0,r.jsx)(n.a,{href:"https://github.com/physical-ai-course/physical-ai-textbook/discussions",children:"GitHub Discussions"})]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453:function(e,n,s){s.d(n,{R:function(){return l},x:function(){return t}});var i=s(6540);const r={},a=i.createContext(r);function l(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);