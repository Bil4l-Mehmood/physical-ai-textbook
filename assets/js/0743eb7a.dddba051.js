"use strict";(self.webpackChunkphysical_ai_textbook=self.webpackChunkphysical_ai_textbook||[]).push([[42],{2900:function(e,n,i){i.r(n),i.d(n,{assets:function(){return o},contentTitle:function(){return l},default:function(){return h},frontMatter:function(){return a},metadata:function(){return r},toc:function(){return c}});var r=JSON.parse('{"id":"chapter-1/1-4-urdf-xacro","title":"Defining the Physical Body: URDF/XACRO","description":"Learn how to describe robot structure using URDF and parameterize with XACRO","source":"@site/docs/chapter-1/1-4-urdf-xacro.md","sourceDirName":"chapter-1","slug":"/chapter-1/1-4-urdf-xacro","permalink":"/physical-ai-textbook/docs/chapter-1/1-4-urdf-xacro","draft":false,"unlisted":false,"editUrl":"https://github.com/Bil4l-Mehmood/physical-ai-textbook/edit/main/docs/chapter-1/1-4-urdf-xacro.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"sidebar_label":"Lesson 1.4: URDF/XACRO Basics","title":"Defining the Physical Body: URDF/XACRO","description":"Learn how to describe robot structure using URDF and parameterize with XACRO","duration":90,"difficulty":"Intermediate","hardware":["Jetson Orin Nano","Isaac Sim (optional)"],"prerequisites":["Lesson 1.3: rclpy Packages & Launch Files"]},"sidebar":"tutorialSidebar","previous":{"title":"Lesson 1.3: rclpy Packages & Launch","permalink":"/physical-ai-textbook/docs/chapter-1/1-3-rclpy-packages"},"next":{"title":"Lesson 2.1: Gazebo Fundamentals","permalink":"/physical-ai-textbook/docs/chapter-2/2-1-gazebo-fundamentals"}}'),s=i(4848),t=i(8453);const a={sidebar_position:4,sidebar_label:"Lesson 1.4: URDF/XACRO Basics",title:"Defining the Physical Body: URDF/XACRO",description:"Learn how to describe robot structure using URDF and parameterize with XACRO",duration:90,difficulty:"Intermediate",hardware:["Jetson Orin Nano","Isaac Sim (optional)"],prerequisites:["Lesson 1.3: rclpy Packages & Launch Files"]},l="Lesson 1.4: Defining the Physical Body: URDF/XACRO",o={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Hardware &amp; Prerequisites",id:"hardware--prerequisites",level:2},{value:"URDF: Unified Robot Description Format",id:"urdf-unified-robot-description-format",level:2},{value:"URDF Anatomy",id:"urdf-anatomy",level:3},{value:"Key URDF Elements",id:"key-urdf-elements",level:3},{value:"Creating Your First URDF",id:"creating-your-first-urdf",level:2},{value:"Simple Two-Link Robot",id:"simple-two-link-robot",level:3},{value:"Understanding the Example",id:"understanding-the-example",level:3},{value:"XACRO: eXtensible Robot Configuration",id:"xacro-extensible-robot-configuration",level:2},{value:"Basic XACRO Syntax",id:"basic-xacro-syntax",level:3},{value:"XACRO Properties",id:"xacro-properties",level:3},{value:"Key XACRO Features",id:"key-xacro-features",level:3},{value:"Complete Example: Parameterized Humanoid Leg",id:"complete-example-parameterized-humanoid-leg",level:2},{value:"Loading and Validating URDF",id:"loading-and-validating-urdf",level:2},{value:"Converting XACRO to URDF",id:"converting-xacro-to-urdf",level:3},{value:"Validating URDF Syntax",id:"validating-urdf-syntax",level:3},{value:"Viewing in RViz",id:"viewing-in-rviz",level:3},{value:"Hands-On Exercise",id:"hands-on-exercise",level:2},{value:"Step-by-Step Instructions",id:"step-by-step-instructions",level:3},{value:"1. Create XACRO Template",id:"1-create-xacro-template",level:4},{value:"2. Parameterize the Design",id:"2-parameterize-the-design",level:4},{value:"3. Validate",id:"3-validate",level:4},{value:"4. Visualize",id:"4-visualize",level:4},{value:"Exercises",id:"exercises",level:3},{value:"Common Errors &amp; Fixes",id:"common-errors--fixes",level:2},{value:"Key Takeaways",id:"key-takeaways",level:2},{value:"Further Reading",id:"further-reading",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"lesson-14-defining-the-physical-body-urdfxacro",children:"Lesson 1.4: Defining the Physical Body: URDF/XACRO"})}),"\n",(0,s.jsxs)(n.admonition,{title:"Lesson Overview",type:"info",children:[(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Duration"}),": 90 minutes | ",(0,s.jsx)(n.strong,{children:"Difficulty"}),": Intermediate | ",(0,s.jsx)(n.strong,{children:"Hardware"}),": Jetson Orin Nano + Isaac Sim (optional)"]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Prerequisites"}),": Complete Lesson 1.3 (rclpy Packages & Launch Files)"]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Learning Outcome"}),": Create robot descriptions using URDF and parameterize them with XACRO for reusability"]})]}),"\n",(0,s.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,s.jsx)(n.p,{children:"By the end of this lesson, you will be able to:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Understand URDF (Unified Robot Description Format) XML structure"}),"\n",(0,s.jsx)(n.li,{children:"Define robot links and joints in URDF with geometry and inertia"}),"\n",(0,s.jsx)(n.li,{children:"Create parameterized robot descriptions using XACRO macros"}),"\n",(0,s.jsx)(n.li,{children:"Use XACRO properties and macros for code reusability"}),"\n",(0,s.jsx)(n.li,{children:"Load and validate URDF files with ROS 2 tools"}),"\n",(0,s.jsx)(n.li,{children:"Visualize URDF in RViz and Isaac Sim"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"hardware--prerequisites",children:"Hardware & Prerequisites"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Required"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Jetson Orin Nano with ROS 2 Humble installed"}),"\n",(0,s.jsx)(n.li,{children:"URDF parser tools (included with ROS 2)"}),"\n",(0,s.jsx)(n.li,{children:"Text editor (nano, vim, or VS Code)"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Optional (for visualization)"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"RViz 2 (comes with ROS 2 Desktop)"}),"\n",(0,s.jsx)(n.li,{children:"NVIDIA Isaac Sim 2024.1+ for 3D simulation"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Verification"}),": Confirm URDF tools are available"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 pkg list | grep urdf\n"})}),"\n",(0,s.jsx)(n.h2,{id:"urdf-unified-robot-description-format",children:"URDF: Unified Robot Description Format"}),"\n",(0,s.jsxs)(n.admonition,{title:"URDF Purpose",type:"tip",children:[(0,s.jsx)(n.p,{children:"URDF is an XML format that describes a robot's physical structure:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Links"}),": Rigid bodies with geometry, inertia, and visual properties"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Joints"}),": Connections between links (revolute, prismatic, fixed)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Frames"}),": Coordinate systems for transformations"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Collision and Visual Models"}),": For simulation and visualization"]}),"\n"]})]}),"\n",(0,s.jsx)(n.h3,{id:"urdf-anatomy",children:"URDF Anatomy"}),"\n",(0,s.jsx)(n.p,{children:"Every URDF robot has this basic structure:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" ?>\n<robot name="my_robot">\n  \x3c!-- Define robot links (bodies) --\x3e\n  <link name="base_link">\n    \x3c!-- Visual geometry for rendering --\x3e\n    <visual>\n      <geometry>\n        <box size="0.1 0.1 0.2"/>\n      </geometry>\n    </visual>\n    \x3c!-- Collision geometry for simulation --\x3e\n    <collision>\n      <geometry>\n        <box size="0.1 0.1 0.2"/>\n      </geometry>\n    </collision>\n    \x3c!-- Mass and inertia for physics --\x3e\n    <inertial>\n      <mass value="1.0"/>\n      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>\n    </inertial>\n  </link>\n\n  \x3c!-- Define joints (connections between links) --\x3e\n  <joint name="joint_1" type="revolute">\n    <parent link="base_link"/>\n    <child link="link_1"/>\n    <origin xyz="0 0 0.1" rpy="0 0 0"/>\n    <axis xyz="0 1 0"/>\n    <limit lower="0" upper="3.14159" effort="10" velocity="1"/>\n  </joint>\n\n  \x3c!-- More links and joints... --\x3e\n</robot>\n'})}),"\n",(0,s.jsx)(n.h3,{id:"key-urdf-elements",children:"Key URDF Elements"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Link Element"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"<visual>"}),": How the link appears in RViz/simulation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"<collision>"}),": Collision geometry for physics"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"<inertial>"}),": Mass and inertia properties"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Joint Element"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"type"}),": revolute (rotates), prismatic (slides), fixed, continuous"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"<parent>"}),": Link this joint is attached to"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"<child>"}),": Link being connected"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"<axis>"}),": Direction of rotation/translation (x, y, or z)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"<limit>"}),": Range of motion (lower, upper, effort, velocity)"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Origin (Transform)"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"xyz"}),": Position relative to parent (x y z in meters)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"rpy"}),": Rotation in roll-pitch-yaw (radians)"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"creating-your-first-urdf",children:"Creating Your First URDF"}),"\n",(0,s.jsx)(n.h3,{id:"simple-two-link-robot",children:"Simple Two-Link Robot"}),"\n",(0,s.jsxs)(n.p,{children:["Create ",(0,s.jsx)(n.code,{children:"simple_robot.urdf"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" ?>\n\x3c!-- Copyright (c) 2025 Physical AI Course\n     License: MIT\n     Target: NVIDIA Jetson Orin Nano - ROS 2 Humble\n--\x3e\n<robot name="simple_robot">\n  \x3c!-- Base link (fixed to world) --\x3e\n  <link name="base_link">\n    <inertial>\n      <mass value="1.0"/>\n      <origin xyz="0 0 0"/>\n      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>\n    </inertial>\n    <visual>\n      <origin xyz="0 0 0.05"/>\n      <geometry>\n        <box size="0.1 0.1 0.1"/>\n      </geometry>\n      <material name="base_material">\n        <color rgba="0.5 0.5 0.5 1.0"/>\n      </material>\n    </visual>\n    <collision>\n      <origin xyz="0 0 0.05"/>\n      <geometry>\n        <box size="0.1 0.1 0.1"/>\n      </geometry>\n    </collision>\n  </link>\n\n  \x3c!-- Joint connecting base to first link --\x3e\n  <joint name="joint_1" type="revolute">\n    <parent link="base_link"/>\n    <child link="link_1"/>\n    <origin xyz="0 0 0.1" rpy="0 0 0"/>\n    <axis xyz="0 1 0"/>\n    <limit lower="-1.5708" upper="1.5708" effort="10" velocity="1"/>\n    <dynamics damping="0.1" friction="0.0"/>\n  </joint>\n\n  \x3c!-- First arm link --\x3e\n  <link name="link_1">\n    <inertial>\n      <mass value="0.5"/>\n      <origin xyz="0 0 0.05"/>\n      <inertia ixx="0.005" ixy="0" ixz="0" iyy="0.005" iyz="0" izz="0.001"/>\n    </inertial>\n    <visual>\n      <origin xyz="0 0 0.05"/>\n      <geometry>\n        <cylinder radius="0.02" length="0.1"/>\n      </geometry>\n      <material name="link_material">\n        <color rgba="0.2 0.2 0.8 1.0"/>\n      </material>\n    </visual>\n    <collision>\n      <origin xyz="0 0 0.05"/>\n      <geometry>\n        <cylinder radius="0.02" length="0.1"/>\n      </geometry>\n    </collision>\n  </link>\n\n  \x3c!-- Joint connecting first to second link --\x3e\n  <joint name="joint_2" type="revolute">\n    <parent link="link_1"/>\n    <child link="link_2"/>\n    <origin xyz="0 0 0.1" rpy="0 0 0"/>\n    <axis xyz="0 1 0"/>\n    <limit lower="-1.5708" upper="1.5708" effort="10" velocity="1"/>\n    <dynamics damping="0.1" friction="0.0"/>\n  </joint>\n\n  \x3c!-- Second arm link (end effector) --\x3e\n  <link name="link_2">\n    <inertial>\n      <mass value="0.3"/>\n      <origin xyz="0 0 0.05"/>\n      <inertia ixx="0.003" ixy="0" ixz="0" iyy="0.003" iyz="0" izz="0.0005"/>\n    </inertial>\n    <visual>\n      <origin xyz="0 0 0.05"/>\n      <geometry>\n        <cylinder radius="0.015" length="0.1"/>\n      </geometry>\n      <material name="endeffector_material">\n        <color rgba="0.8 0.2 0.2 1.0"/>\n      </material>\n    </visual>\n    <collision>\n      <origin xyz="0 0 0.05"/>\n      <geometry>\n        <cylinder radius="0.015" length="0.1"/>\n      </geometry>\n    </collision>\n  </link>\n</robot>\n'})}),"\n",(0,s.jsx)(n.h3,{id:"understanding-the-example",children:"Understanding the Example"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Links"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"base_link"}),": Main body (box geometry)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"link_1"}),": First segment (cylinder)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"link_2"}),": Second segment (end effector)"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Joints"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"joint_1"}),": Connects base to first link (revolute, \xb190\xb0)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"joint_2"}),": Connects first to second link (revolute, \xb190\xb0)"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Properties"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"mass"}),": Weight in kg (affects physics simulation)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"inertia"}),": Resistance to rotation (simplified as diagonal matrix)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"color"}),": RGBA values (0-1 scale) for visualization"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"xacro-extensible-robot-configuration",children:"XACRO: eXtensible Robot Configuration"}),"\n",(0,s.jsxs)(n.admonition,{title:"XACRO Purpose",type:"note",children:[(0,s.jsx)(n.p,{children:"XACRO is a preprocessing language that extends URDF with:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Variables"}),": Define parameters once, use everywhere"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Macros"}),": Reusable blocks of XML code"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Conditionals"}),": If-then blocks for flexibility"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Math expressions"}),": Calculate values dynamically"]}),"\n"]})]}),"\n",(0,s.jsx)(n.h3,{id:"basic-xacro-syntax",children:"Basic XACRO Syntax"}),"\n",(0,s.jsxs)(n.p,{children:["XACRO files use ",(0,s.jsx)(n.code,{children:"*.urdf.xacro"})," extension and are preprocessed into ",(0,s.jsx)(n.code,{children:".urdf"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"xacro simple_robot.urdf.xacro > simple_robot.urdf\n"})}),"\n",(0,s.jsx)(n.h3,{id:"xacro-properties",children:"XACRO Properties"}),"\n",(0,s.jsxs)(n.p,{children:["Create ",(0,s.jsx)(n.code,{children:"simple_robot.urdf.xacro"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" ?>\n\x3c!-- Copyright (c) 2025 Physical AI Course\n     License: MIT\n     Target: NVIDIA Jetson Orin Nano - ROS 2 Humble\n--\x3e\n<robot name="simple_robot" xmlns:xacro="http://www.ros.org/wiki/xacro">\n\n  \x3c!-- Define reusable properties --\x3e\n  <xacro:property name="base_mass" value="1.0"/>\n  <xacro:property name="link_mass" value="0.5"/>\n  <xacro:property name="ee_mass" value="0.3"/>\n\n  <xacro:property name="base_length" value="0.1"/>\n  <xacro:property name="base_width" value="0.1"/>\n  <xacro:property name="base_height" value="0.1"/>\n\n  <xacro:property name="link_length" value="0.1"/>\n  <xacro:property name="link_radius" value="0.02"/>\n\n  <xacro:property name="joint_limit_min" value="-1.5708"/>\n  <xacro:property name="joint_limit_max" value="1.5708"/>\n  <xacro:property name="joint_effort" value="10"/>\n  <xacro:property name="joint_velocity" value="1"/>\n\n  \x3c!-- Base link --\x3e\n  <link name="base_link">\n    <inertial>\n      <mass value="${base_mass}"/>\n      <origin xyz="0 0 0"/>\n      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>\n    </inertial>\n    <visual>\n      <origin xyz="0 0 ${base_height/2}"/>\n      <geometry>\n        <box size="${base_length} ${base_width} ${base_height}"/>\n      </geometry>\n      <material name="base_material">\n        <color rgba="0.5 0.5 0.5 1.0"/>\n      </material>\n    </visual>\n    <collision>\n      <origin xyz="0 0 ${base_height/2}"/>\n      <geometry>\n        <box size="${base_length} ${base_width} ${base_height}"/>\n      </geometry>\n    </collision>\n  </link>\n\n  \x3c!-- Macro for creating arm segments --\x3e\n  <xacro:macro name="arm_segment" params="name parent joint_name x_offset">\n    <joint name="${joint_name}" type="revolute">\n      <parent link="${parent}"/>\n      <child link="${name}"/>\n      <origin xyz="${x_offset} 0 ${link_length}" rpy="0 0 0"/>\n      <axis xyz="0 1 0"/>\n      <limit lower="${joint_limit_min}" upper="${joint_limit_max}"\n             effort="${joint_effort}" velocity="${joint_velocity}"/>\n      <dynamics damping="0.1" friction="0.0"/>\n    </joint>\n\n    <link name="${name}">\n      <inertial>\n        <mass value="${link_mass}"/>\n        <origin xyz="0 0 ${link_length/2}"/>\n        <inertia ixx="0.005" ixy="0" ixz="0" iyy="0.005" iyz="0" izz="0.001"/>\n      </inertial>\n      <visual>\n        <origin xyz="0 0 ${link_length/2}"/>\n        <geometry>\n          <cylinder radius="${link_radius}" length="${link_length}"/>\n        </geometry>\n        <material name="link_material">\n          <color rgba="0.2 0.2 0.8 1.0"/>\n        </material>\n      </visual>\n      <collision>\n        <origin xyz="0 0 ${link_length/2}"/>\n        <geometry>\n          <cylinder radius="${link_radius}" length="${link_length}"/>\n        </geometry>\n      </collision>\n    </link>\n  </xacro:macro>\n\n  \x3c!-- Create arm segments using macro --\x3e\n  <xacro:arm_segment name="link_1" parent="base_link"\n                     joint_name="joint_1" x_offset="0"/>\n  <xacro:arm_segment name="link_2" parent="link_1"\n                     joint_name="joint_2" x_offset="0"/>\n\n</robot>\n'})}),"\n",(0,s.jsx)(n.h3,{id:"key-xacro-features",children:"Key XACRO Features"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Feature"}),(0,s.jsx)(n.th,{children:"Syntax"}),(0,s.jsx)(n.th,{children:"Purpose"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Property"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:'<xacro:property name="var" value="10"/>'})}),(0,s.jsx)(n.td,{children:"Define constant"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Reference"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"${var_name}"})}),(0,s.jsx)(n.td,{children:"Use property value"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Math"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"${3.14159 / 2}"})}),(0,s.jsx)(n.td,{children:"Calculate values"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Macro"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:'<xacro:macro name="name" params="...">'})}),(0,s.jsx)(n.td,{children:"Define reusable block"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Macro call"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:'<xacro:macro_name param="value"/>'})}),(0,s.jsx)(n.td,{children:"Use macro"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"complete-example-parameterized-humanoid-leg",children:"Complete Example: Parameterized Humanoid Leg"}),"\n",(0,s.jsx)(n.p,{children:"Create a reusable humanoid leg that can be instantiated with different parameters:"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"humanoid_leg.urdf.xacro"})}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" ?>\n\x3c!-- Copyright (c) 2025 Physical AI Course\n     License: MIT\n     Target: NVIDIA Jetson Orin Nano - ROS 2 Humble\n--\x3e\n<robot name="humanoid_leg" xmlns:xacro="http://www.ros.org/wiki/xacro">\n\n  \x3c!-- Configurable parameters for leg --\x3e\n  <xacro:arg name="leg_side" default="right"/>\n\n  <xacro:property name="leg_side" value="$(arg leg_side)"/>\n\n  \x3c!-- Leg dimensions (in meters) --\x3e\n  <xacro:property name="hip_length" value="0.08"/>\n  <xacro:property name="thigh_length" value="0.3"/>\n  <xacro:property name="calf_length" value="0.3"/>\n  <xacro:property name="foot_length" value="0.15"/>\n  <xacro:property name="foot_width" value="0.08"/>\n\n  <xacro:property name="segment_radius" value="0.02"/>\n\n  \x3c!-- Mass distribution --\x3e\n  <xacro:property name="hip_mass" value="0.5"/>\n  <xacro:property name="thigh_mass" value="1.5"/>\n  <xacro:property name="calf_mass" value="1.0"/>\n  <xacro:property name="foot_mass" value="0.5"/>\n\n  \x3c!-- Hip (pelvis connection point) --\x3e\n  <link name="hip_${leg_side}">\n    <inertial>\n      <mass value="${hip_mass}"/>\n      <origin xyz="0 0 0"/>\n      <inertia ixx="0.005" ixy="0" ixz="0" iyy="0.005" iyz="0" izz="0.003"/>\n    </inertial>\n    <visual>\n      <origin xyz="0 0 0"/>\n      <geometry>\n        <sphere radius="${segment_radius * 1.5}"/>\n      </geometry>\n      <material name="hip_material">\n        <color rgba="0.3 0.3 0.3 1.0"/>\n      </material>\n    </visual>\n    <collision>\n      <origin xyz="0 0 0"/>\n      <geometry>\n        <sphere radius="${segment_radius * 1.5}"/>\n      </geometry>\n    </collision>\n  </link>\n\n  \x3c!-- Hip-knee joint --\x3e\n  <joint name="hip_knee_${leg_side}" type="revolute">\n    <parent link="hip_${leg_side}"/>\n    <child link="thigh_${leg_side}"/>\n    <origin xyz="0 0 -${hip_length}" rpy="0 0 0"/>\n    <axis xyz="1 0 0"/>\n    <limit lower="-1.5708" upper="1.5708" effort="50" velocity="2"/>\n    <dynamics damping="0.5" friction="0.0"/>\n  </joint>\n\n  \x3c!-- Thigh --\x3e\n  <link name="thigh_${leg_side}">\n    <inertial>\n      <mass value="${thigh_mass}"/>\n      <origin xyz="0 0 -${thigh_length/2}"/>\n      <inertia ixx="0.02" ixy="0" ixz="0" iyy="0.02" iyz="0" izz="0.002"/>\n    </inertial>\n    <visual>\n      <origin xyz="0 0 -${thigh_length/2}"/>\n      <geometry>\n        <cylinder radius="${segment_radius}" length="${thigh_length}"/>\n      </geometry>\n      <material name="thigh_material">\n        <color rgba="0.2 0.2 0.8 1.0"/>\n      </material>\n    </visual>\n    <collision>\n      <origin xyz="0 0 -${thigh_length/2}"/>\n      <geometry>\n        <cylinder radius="${segment_radius}" length="${thigh_length}"/>\n      </geometry>\n    </collision>\n  </link>\n\n  \x3c!-- Knee joint --\x3e\n  <joint name="knee_ankle_${leg_side}" type="revolute">\n    <parent link="thigh_${leg_side}"/>\n    <child link="calf_${leg_side}"/>\n    <origin xyz="0 0 -${thigh_length}" rpy="0 0 0"/>\n    <axis xyz="1 0 0"/>\n    <limit lower="0" upper="2.5" effort="50" velocity="2"/>\n    <dynamics damping="0.5" friction="0.0"/>\n  </joint>\n\n  \x3c!-- Calf --\x3e\n  <link name="calf_${leg_side}">\n    <inertial>\n      <mass value="${calf_mass}"/>\n      <origin xyz="0 0 -${calf_length/2}"/>\n      <inertia ixx="0.015" ixy="0" ixz="0" iyy="0.015" iyz="0" izz="0.001"/>\n    </inertial>\n    <visual>\n      <origin xyz="0 0 -${calf_length/2}"/>\n      <geometry>\n        <cylinder radius="${segment_radius}" length="${calf_length}"/>\n      </geometry>\n      <material name="calf_material">\n        <color rgba="0.8 0.2 0.2 1.0"/>\n      </material>\n    </visual>\n    <collision>\n      <origin xyz="0 0 -${calf_length/2}"/>\n      <geometry>\n        <cylinder radius="${segment_radius}" length="${calf_length}"/>\n      </geometry>\n    </collision>\n  </link>\n\n  \x3c!-- Ankle joint --\x3e\n  <joint name="ankle_foot_${leg_side}" type="revolute">\n    <parent link="calf_${leg_side}"/>\n    <child link="foot_${leg_side}"/>\n    <origin xyz="0 0 -${calf_length}" rpy="0 0 0"/>\n    <axis xyz="1 0 0"/>\n    <limit lower="-0.7854" upper="0.7854" effort="20" velocity="1"/>\n    <dynamics damping="0.3" friction="0.0"/>\n  </joint>\n\n  \x3c!-- Foot (contact with ground) --\x3e\n  <link name="foot_${leg_side}">\n    <inertial>\n      <mass value="${foot_mass}"/>\n      <origin xyz="${foot_length/2} 0 -${foot_width/2}"/>\n      <inertia ixx="0.005" ixy="0" ixz="0" iyy="0.005" iyz="0" izz="0.003"/>\n    </inertial>\n    <visual>\n      <origin xyz="${foot_length/2} 0 -${foot_width/2}"/>\n      <geometry>\n        <box size="${foot_length} 0.04 ${foot_width}"/>\n      </geometry>\n      <material name="foot_material">\n        <color rgba="0.1 0.1 0.1 1.0"/>\n      </material>\n    </visual>\n    <collision>\n      <origin xyz="${foot_length/2} 0 -${foot_width/2}"/>\n      <geometry>\n        <box size="${foot_length} 0.04 ${foot_width}"/>\n      </geometry>\n    </collision>\n  </link>\n\n</robot>\n'})}),"\n",(0,s.jsx)(n.h2,{id:"loading-and-validating-urdf",children:"Loading and Validating URDF"}),"\n",(0,s.jsx)(n.h3,{id:"converting-xacro-to-urdf",children:"Converting XACRO to URDF"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Convert XACRO to URDF\nxacro humanoid_leg.urdf.xacro > humanoid_leg.urdf\n\n# Create right and left legs\nxacro humanoid_leg.urdf.xacro leg_side:=right > humanoid_leg_right.urdf\nxacro humanoid_leg.urdf.xacro leg_side:=left > humanoid_leg_left.urdf\n"})}),"\n",(0,s.jsx)(n.h3,{id:"validating-urdf-syntax",children:"Validating URDF Syntax"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Check for parsing errors\nurdf_parser humanoid_leg.urdf\n\n# Print robot structure\nurdf_to_graphviz humanoid_leg.urdf\n"})}),"\n",(0,s.jsx)(n.h3,{id:"viewing-in-rviz",children:"Viewing in RViz"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Launch RViz with URDF\nros2 run rviz2 rviz2 -d $(ros2 pkg prefix rviz2)/share/rviz2/rviz/default.rviz\n\n# In another terminal, publish the robot description\nros2 run robot_state_publisher robot_state_publisher --ros-args -p robot_description:="$(xacro ~/humanoid_leg.urdf.xacro)"\n'})}),"\n",(0,s.jsx)(n.h2,{id:"hands-on-exercise",children:"Hands-On Exercise"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Task"}),": Create a parameterized 2-DOF robotic arm that can be instantiated at different sizes."]}),"\n",(0,s.jsx)(n.h3,{id:"step-by-step-instructions",children:"Step-by-Step Instructions"}),"\n",(0,s.jsx)(n.h4,{id:"1-create-xacro-template",children:"1. Create XACRO Template"}),"\n",(0,s.jsxs)(n.p,{children:["Create ",(0,s.jsx)(n.code,{children:"robotic_arm.urdf.xacro"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" ?>\n<robot name="robotic_arm" xmlns:xacro="http://www.ros.org/wiki/xacro">\n  \x3c!-- Exercise: Fill in the parameters and macro definitions --\x3e\n\n  \x3c!-- TODO: Define properties for arm length, mass, joint limits --\x3e\n\n  \x3c!-- TODO: Create arm_segment macro with parameters --\x3e\n\n  \x3c!-- TODO: Instantiate multiple segments using macro --\x3e\n</robot>\n'})}),"\n",(0,s.jsx)(n.h4,{id:"2-parameterize-the-design",children:"2. Parameterize the Design"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Create URDF with different configurations\nxacro robotic_arm.urdf.xacro > arm_standard.urdf\nxacro robotic_arm.urdf.xacro segment_count:=3 > arm_3dof.urdf\nxacro robotic_arm.urdf.xacro segment_count:=4 > arm_4dof.urdf\n"})}),"\n",(0,s.jsx)(n.h4,{id:"3-validate",children:"3. Validate"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Check for syntax errors\nurdf_parser arm_standard.urdf\n\n# View structure\nurdf_to_graphviz arm_standard.urdf | dot -Tsvg > arm_structure.svg\n"})}),"\n",(0,s.jsx)(n.h4,{id:"4-visualize",children:"4. Visualize"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Launch RViz and visualize the arm\nros2 launch robot_state_publisher robot_state_publisher.launch.py\n  model:=arm_standard.urdf\n"})}),"\n",(0,s.jsx)(n.h3,{id:"exercises",children:"Exercises"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Parameter Study"}),": Create arm configurations with 2, 3, and 4 DOF by changing ",(0,s.jsx)(n.code,{children:"segment_count"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Mass Distribution"}),": Modify link masses and observe how inertia properties change"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Payload Capacity"}),": Add an end effector and calculate maximum payload"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Joint Limits"}),": Change joint limits and verify in visualization"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Collision Detection"}),": Add collision geometries and test with Gazebo"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"common-errors--fixes",children:"Common Errors & Fixes"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Error"}),(0,s.jsx)(n.th,{children:"Cause"}),(0,s.jsx)(n.th,{children:"Fix"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"URDF parse error"})}),(0,s.jsx)(n.td,{children:"Malformed XML"}),(0,s.jsx)(n.td,{children:"Check closing tags and quotes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"undefined reference to 'link_name'"})}),(0,s.jsx)(n.td,{children:"Joint references non-existent link"}),(0,s.jsx)(n.td,{children:"Verify all link names match exactly"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"inertia value is negative"})}),(0,s.jsx)(n.td,{children:"Inertia matrix not positive definite"}),(0,s.jsx)(n.td,{children:"Use positive diagonal values"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"XACRO: undefined property"})}),(0,s.jsx)(n.td,{children:"Typo in property name"}),(0,s.jsxs)(n.td,{children:["Check ",(0,s.jsx)(n.code,{children:"${variable_name}"})," spelling"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Unable to load robot model"})}),(0,s.jsx)(n.td,{children:"File path incorrect"}),(0,s.jsx)(n.td,{children:"Use absolute path or check working directory"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"TF tree has a cycle"})}),(0,s.jsx)(n.td,{children:"Circular parent-child relationship"}),(0,s.jsx)(n.td,{children:"Verify joint hierarchy is a tree (no loops)"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"URDF Structure"}),": Links (bodies) connected by joints (constraints) form robot kinematic chain"]}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Geometry Types"}),": Boxes, cylinders, spheres, and meshes provide flexible collision/visual representation"]}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Inertia Properties"}),": Mass, inertia tensor, and center of mass are crucial for physics simulation"]}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"XACRO Power"}),": Properties and macros eliminate repetition and enable parameterized robot designs"]}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Validation"}),": Always validate URDF syntax with ",(0,s.jsx)(n.code,{children:"urdf_parser"})," before visualization"]}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Visualization"}),": RViz, Gazebo, and Isaac Sim display URDF models and enable collision testing"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\ud83d\udcd6 ",(0,s.jsx)(n.a,{href:"http://wiki.ros.org/urdf",children:"URDF Documentation"})]}),"\n",(0,s.jsxs)(n.li,{children:["\ud83d\udcd6 ",(0,s.jsx)(n.a,{href:"http://wiki.ros.org/xacro",children:"XACRO Documentation"})]}),"\n",(0,s.jsxs)(n.li,{children:["\ud83d\udcd6 ",(0,s.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Tutorials/Intermediate/URDF/URDF-Main.html",children:"Building a Visual Robot Model with URDF"})]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Coming Next"}),": Chapter 2 - The Digital Twin"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Questions?"})," Ask in ",(0,s.jsx)(n.a,{href:"https://github.com/physical-ai-course/physical-ai-textbook/discussions",children:"GitHub Discussions"})]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:function(e,n,i){i.d(n,{R:function(){return a},x:function(){return l}});var r=i(6540);const s={},t=r.createContext(s);function a(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);