"use strict";(self.webpackChunkphysical_ai_textbook=self.webpackChunkphysical_ai_textbook||[]).push([[702],{8453:function(n,e,r){r.d(e,{R:function(){return o},x:function(){return t}});var a=r(6540);const s={},i=a.createContext(s);function o(n){const e=a.useContext(i);return a.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:o(n.components),a.createElement(i.Provider,{value:e},n.children)}},9378:function(n,e,r){r.r(e),r.d(e,{assets:function(){return l},contentTitle:function(){return t},default:function(){return u},frontMatter:function(){return o},metadata:function(){return a},toc:function(){return c}});var a=JSON.parse('{"id":"chapter-3/3-2-vslam-navigation","title":"Isaac ROS: Hardware-Accelerated VSLAM and Autonomous Navigation","description":"Implement visual SLAM and autonomous navigation using Isaac ROS and Nav2","source":"@site/docs/chapter-3/3-2-vslam-navigation.md","sourceDirName":"chapter-3","slug":"/chapter-3/3-2-vslam-navigation","permalink":"/physical-ai-textbook/docs/chapter-3/3-2-vslam-navigation","draft":false,"unlisted":false,"editUrl":"https://github.com/Bil4l-Mehmood/physical-ai-textbook/edit/main/docs/chapter-3/3-2-vslam-navigation.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"sidebar_label":"Lesson 3.2: VSLAM & Navigation","title":"Isaac ROS: Hardware-Accelerated VSLAM and Autonomous Navigation","description":"Implement visual SLAM and autonomous navigation using Isaac ROS and Nav2","duration":120,"difficulty":"Advanced","hardware":["Ubuntu 22.04 LTS","Jetson Orin Nano/NX","Intel RealSense D435i","ROS 2 Humble"],"prerequisites":["Lesson 3.1: NVIDIA Isaac Sim Basics"]},"sidebar":"tutorialSidebar","previous":{"title":"Lesson 3.1: NVIDIA Isaac Sim","permalink":"/physical-ai-textbook/docs/chapter-3/3-1-isaac-sim-basics"},"next":{"title":"Lesson 3.3: Computer Vision Isaac ROS","permalink":"/physical-ai-textbook/docs/chapter-3/3-3-computer-vision-isaac-ros"}}'),s=r(4848),i=r(8453);const o={sidebar_position:2,sidebar_label:"Lesson 3.2: VSLAM & Navigation",title:"Isaac ROS: Hardware-Accelerated VSLAM and Autonomous Navigation",description:"Implement visual SLAM and autonomous navigation using Isaac ROS and Nav2",duration:120,difficulty:"Advanced",hardware:["Ubuntu 22.04 LTS","Jetson Orin Nano/NX","Intel RealSense D435i","ROS 2 Humble"],prerequisites:["Lesson 3.1: NVIDIA Isaac Sim Basics"]},t="Lesson 3.2: VSLAM & Navigation with Isaac ROS",l={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Part 1: VSLAM Fundamentals",id:"part-1-vslam-fundamentals",level:2},{value:"SLAM vs Pure Localization",id:"slam-vs-pure-localization",level:3},{value:"Isaac ROS vs Standard ROS 2 SLAM",id:"isaac-ros-vs-standard-ros-2-slam",level:3},{value:"Visual Features for SLAM",id:"visual-features-for-slam",level:3},{value:"Part 2: Installing Isaac ROS VSLAM",id:"part-2-installing-isaac-ros-vslam",level:2},{value:"Prerequisites Check",id:"prerequisites-check",level:3},{value:"Installation on Jetson",id:"installation-on-jetson",level:3},{value:"Verification",id:"verification",level:3},{value:"Part 3: SLAM Configuration and Launch",id:"part-3-slam-configuration-and-launch",level:2},{value:"SLAM Configuration File",id:"slam-configuration-file",level:3},{value:"SLAM Launch File",id:"slam-launch-file",level:3},{value:"Launch VSLAM",id:"launch-vslam",level:3},{value:"Part 4: Nav2 Navigation Stack",id:"part-4-nav2-navigation-stack",level:2},{value:"Nav2 Configuration",id:"nav2-configuration",level:3},{value:"Nav2 Launch File",id:"nav2-launch-file",level:3},{value:"Part 5: End-to-End VSLAM + Navigation",id:"part-5-end-to-end-vslam--navigation",level:2},{value:"Complete System Script",id:"complete-system-script",level:3},{value:"Hands-On Exercise",id:"hands-on-exercise",level:2},{value:"Step 1: Launch VSLAM",id:"step-1-launch-vslam",level:3},{value:"Step 2: Map Environment",id:"step-2-map-environment",level:3},{value:"Step 3: Save Map",id:"step-3-save-map",level:3},{value:"Step 4: Launch Navigation",id:"step-4-launch-navigation",level:3},{value:"Step 5: Send Navigation Goals",id:"step-5-send-navigation-goals",level:3},{value:"Exercises",id:"exercises",level:3},{value:"Common Issues &amp; Solutions",id:"common-issues--solutions",level:2},{value:"Key Takeaways",id:"key-takeaways",level:2}];function d(n){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"lesson-32-vslam--navigation-with-isaac-ros",children:"Lesson 3.2: VSLAM & Navigation with Isaac ROS"})}),"\n",(0,s.jsxs)(e.admonition,{title:"Lesson Overview",type:"info",children:[(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Duration"}),": 120 minutes | ",(0,s.jsx)(e.strong,{children:"Difficulty"}),": Advanced | ",(0,s.jsx)(e.strong,{children:"Hardware"}),": Jetson Orin + RealSense + ROS 2 Humble"]}),(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Prerequisites"}),": Lesson 3.1 complete"]}),(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Learning Outcome"}),": Deploy hardware-accelerated VSLAM and autonomous navigation on edge devices"]})]}),"\n",(0,s.jsx)(e.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,s.jsx)(e.p,{children:"By the end of this lesson, you will be able to:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Understand Visual SLAM (Simultaneous Localization and Mapping)"}),"\n",(0,s.jsx)(e.li,{children:"Deploy Isaac ROS VSLAM on Jetson hardware"}),"\n",(0,s.jsx)(e.li,{children:"Build real-time occupancy maps from camera and depth data"}),"\n",(0,s.jsx)(e.li,{children:"Use Nav2 for autonomous path planning and navigation"}),"\n",(0,s.jsx)(e.li,{children:"Configure costmaps and planners for humanoid locomotion"}),"\n",(0,s.jsx)(e.li,{children:"Integrate SLAM output with ROS 2 navigation stack"}),"\n",(0,s.jsx)(e.li,{children:"Validate mapping and localization in real environments"}),"\n",(0,s.jsx)(e.li,{children:"Optimize performance on edge devices (Jetson Orin Nano)"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"part-1-vslam-fundamentals",children:"Part 1: VSLAM Fundamentals"}),"\n",(0,s.jsxs)(e.admonition,{title:"What is VSLAM?",type:"tip",children:[(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Visual SLAM"})," = Computer Vision + Simultaneous Localization and Mapping"]}),(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Localization"}),": Where am I? (uses visual features)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Mapping"}),": What's around me? (builds environment map)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Simultaneous"}),": Solves both problems together"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Visual"}),": Uses only camera (RGB-D) as sensor"]}),"\n"]})]}),"\n",(0,s.jsx)(e.h3,{id:"slam-vs-pure-localization",children:"SLAM vs Pure Localization"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"Aspect"}),(0,s.jsx)(e.th,{children:"SLAM"}),(0,s.jsx)(e.th,{children:"Localization Only"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Map"})}),(0,s.jsx)(e.td,{children:"Builds map while moving"}),(0,s.jsx)(e.td,{children:"Uses pre-existing map"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Computational Cost"})}),(0,s.jsx)(e.td,{children:"High (continuous mapping)"}),(0,s.jsx)(e.td,{children:"Lower (matching to map)"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Accuracy"})}),(0,s.jsx)(e.td,{children:"Accumulates errors over time"}),(0,s.jsx)(e.td,{children:"Stable with good map"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Use Case"})}),(0,s.jsx)(e.td,{children:"Unknown environments"}),(0,s.jsx)(e.td,{children:"Familiar environments"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Failure Mode"})}),(0,s.jsx)(e.td,{children:"Loop closure errors"}),(0,s.jsx)(e.td,{children:"Global position loss"})]})]})]}),"\n",(0,s.jsx)(e.h3,{id:"isaac-ros-vs-standard-ros-2-slam",children:"Isaac ROS vs Standard ROS 2 SLAM"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"Feature"}),(0,s.jsx)(e.th,{children:"Isaac ROS"}),(0,s.jsx)(e.th,{children:"Standard ROS 2 (gmapping)"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Acceleration"})}),(0,s.jsx)(e.td,{children:"GPU-accelerated (RTX cores)"}),(0,s.jsx)(e.td,{children:"CPU only"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Latency"})}),(0,s.jsx)(e.td,{children:"<50ms per frame"}),(0,s.jsx)(e.td,{children:"200-500ms per frame"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Accuracy"})}),(0,s.jsx)(e.td,{children:"Sub-centimeter"}),(0,s.jsx)(e.td,{children:"Decimeter"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Loop Closure"})}),(0,s.jsx)(e.td,{children:"Learned (neural network)"}),(0,s.jsx)(e.td,{children:"Geometric matching"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Edge Device"})}),(0,s.jsx)(e.td,{children:"Jetson Orin Nano (40 TOPS)"}),(0,s.jsx)(e.td,{children:"Requires i7+ workstation"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Real-time Speed"})}),(0,s.jsx)(e.td,{children:"30 FPS at full resolution"}),(0,s.jsx)(e.td,{children:"5-10 FPS downsample"})]})]})]}),"\n",(0,s.jsx)(e.h3,{id:"visual-features-for-slam",children:"Visual Features for SLAM"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"RGB Image               ORB Features             Feature Matching\r\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502             \u2502        \u2502 \u2022 Oriented  \u2502          \u2502 Keypoint 1  \u2502\r\n\u2502    Robot    \u2502  \u2500\u2500\u2500\u2192  \u2502   FAST      \u2502  \u2500\u2500\u2192     \u2502 matches     \u2502\r\n\u2502   Camera    \u2502        \u2502 \u2022 Rotation  \u2502          \u2502 Keypoint 2  \u2502\r\n\u2502             \u2502        \u2502   invariant \u2502          \u2502    in 3D    \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        \u2502 \u2022 Depth     \u2502          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n                       \u2502   clues     \u2502                  \u2193\r\n                       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n                                                \u2502 Estimate    \u2502\r\n                                                \u2502 camera pose \u2502\r\n                                                \u2502 (SfM)       \u2502\r\n                                                \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"ORB Features"})," (used by Isaac ROS):"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"O"}),": Oriented"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"R"}),": FAST corner detector"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"B"}),": BRIEF binary descriptor"]}),"\n",(0,s.jsx)(e.li,{children:"Advantages: Fast (100 FPS), rotation-invariant, GPU-optimizable"}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"part-2-installing-isaac-ros-vslam",children:"Part 2: Installing Isaac ROS VSLAM"}),"\n",(0,s.jsx)(e.h3,{id:"prerequisites-check",children:"Prerequisites Check"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# Verify Jetson Orin Nano\r\ncat /etc/nv_tegra_release | head -1\r\n# Expected: # R35 (release), REVISION: ...\r\n\r\n# Verify ROS 2 Humble\r\nsource /opt/ros/humble/setup.bash\r\nros2 --version\r\n\r\n# Verify RealSense camera\r\nrealsense-viewer\r\n# Should show D435i RGB + Depth streams\n"})}),"\n",(0,s.jsx)(e.h3,{id:"installation-on-jetson",children:"Installation on Jetson"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# Add Isaac ROS sources\r\nsource /opt/ros/humble/setup.bash\r\n\r\n# Install Isaac ROS VSLAM GEMs\r\nsudo apt update\r\nsudo apt install -y \\\r\n  ros-humble-isaac-ros-visual-slam \\\r\n  ros-humble-isaac-ros-depth-image-proc \\\r\n  ros-humble-isaac-ros-ess \\\r\n  ros-humble-realsense2-camera\r\n\r\n# Install Nav2 (navigation stack)\r\nsudo apt install -y \\\r\n  ros-humble-navigation2 \\\r\n  ros-humble-nav2-bringup \\\r\n  ros-humble-cartographer\n"})}),"\n",(0,s.jsx)(e.h3,{id:"verification",children:"Verification"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# Check Isaac ROS installation\r\nros2 pkg list | grep isaac_ros\r\n\r\n# Expected output:\r\n# isaac_ros_common\r\n# isaac_ros_visual_slam\r\n# isaac_ros_depth_image_proc\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"part-3-slam-configuration-and-launch",children:"Part 3: SLAM Configuration and Launch"}),"\n",(0,s.jsx)(e.h3,{id:"slam-configuration-file",children:"SLAM Configuration File"}),"\n",(0,s.jsxs)(e.p,{children:["Create ",(0,s.jsx)(e.code,{children:"~/ros2_ws/config/visual_slam_config.yaml"}),":"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:"# Isaac ROS Visual SLAM Configuration\r\nvisual_slam_node:\r\n  ros__parameters:\r\n    # Camera calibration (from RealSense D435i)\r\n    camera_info_topic: '/camera/color/camera_info'\r\n    rgb_image_topic: '/camera/color/image_raw'\r\n    depth_image_topic: '/camera/depth/image_rect_raw'\r\n\r\n    # Output topics\r\n    pose_topic: '/visual_slam/pose'\r\n    odometry_topic: '/visual_slam/odometry'\r\n    slam_status_topic: '/visual_slam/status'\r\n\r\n    # VSLAM parameters\r\n    enable_depth_regularization: true\r\n    enable_loop_closure: true\r\n    enable_loop_closure_visualization: false  # Disable for performance\r\n\r\n    # Feature detection\r\n    min_features_for_tracking: 100\r\n    max_features_for_tracking: 500\r\n\r\n    # Keyframe settings\r\n    keyframe_translation_threshold: 0.1  # meters\r\n    keyframe_rotation_threshold: 0.1     # radians\r\n\r\n    # Graph optimization\r\n    loop_closure_confidence_threshold: 0.75\r\n    optimization_frequency: 10  # Hz\r\n\r\n    # Performance tuning for Jetson\r\n    enable_imu_fusion: false  # Jetson may not have IMU\r\n    map_update_frequency: 5   # Hz (lower = faster)\r\n\r\n    # Output map format\r\n    map_type: 'occupancy_grid'\r\n\r\n    # Debug\r\n    enable_debug: false\r\n    verbosity: 'info'\n"})}),"\n",(0,s.jsx)(e.h3,{id:"slam-launch-file",children:"SLAM Launch File"}),"\n",(0,s.jsxs)(e.p,{children:["Create ",(0,s.jsx)(e.code,{children:"~/ros2_ws/launch/visual_slam.launch.py"}),":"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"#!/usr/bin/env python3\r\n\"\"\"\r\nLaunch Visual SLAM with RealSense camera on Jetson Orin Nano\r\n\"\"\"\r\n\r\nfrom launch import LaunchDescription\r\nfrom launch.actions import DeclareLaunchArgument, IncludeLaunchDescription\r\nfrom launch.substitutions import LaunchConfiguration\r\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\r\nfrom launch_ros.actions import Node, PushRosNamespace\r\nfrom launch_ros.substitutions import FindPackageShare\r\nimport os\r\n\r\n\r\ndef generate_launch_description():\r\n    \"\"\"\r\n    Launch Visual SLAM with:\r\n    1. RealSense D435i camera\r\n    2. Isaac ROS VSLAM node\r\n    3. RViz visualization\r\n    \"\"\"\r\n\r\n    # Get paths\r\n    realsense_pkg = FindPackageShare('realsense2_camera')\r\n    isaac_slam_pkg = FindPackageShare('isaac_ros_visual_slam')\r\n\r\n    # Arguments\r\n    camera_namespace = LaunchConfiguration('camera_namespace', default='camera')\r\n    use_rviz = LaunchConfiguration('use_rviz', default='true')\r\n\r\n    return LaunchDescription([\r\n        # Launch RealSense camera\r\n        IncludeLaunchDescription(\r\n            PythonLaunchDescriptionSource(\r\n                os.path.join(realsense_pkg, 'launch', 'rs_launch.py')\r\n            ),\r\n            launch_arguments={\r\n                'camera_name': camera_namespace,\r\n                'depth_module.profile': '640x480x30',  # Jetson-friendly resolution\r\n                'rgb_camera.color_profile': '640x480x30',\r\n                'enable_gyro': 'false',\r\n                'enable_accel': 'false',\r\n                'align_depth': 'true',\r\n                'decimation_filter.enable': 'true',  # Reduce computation\r\n                'spatial_filter.enable': 'true',\r\n            }.items()\r\n        ),\r\n\r\n        # Isaac ROS Visual SLAM\r\n        Node(\r\n            package='isaac_ros_visual_slam',\r\n            executable='visual_slam_node',\r\n            namespace='visual_slam',\r\n            parameters=[{\r\n                'camera_info_topic': f'/{camera_namespace}/color/camera_info',\r\n                'rgb_image_topic': f'/{camera_namespace}/color/image_raw',\r\n                'depth_image_topic': f'/{camera_namespace}/depth/image_rect_raw',\r\n                'enable_loop_closure': True,\r\n                'map_type': 'occupancy_grid',\r\n                'map_publish_rate': 5.0,\r\n            }],\r\n            output='screen'\r\n        ),\r\n\r\n        # RViz visualization\r\n        Node(\r\n            package='rviz2',\r\n            executable='rviz2',\r\n            arguments=['-d', os.path.join(isaac_slam_pkg, 'config', 'visual_slam.rviz')],\r\n            condition=LaunchConfigurationEquals('use_rviz', 'true'),\r\n            output='screen'\r\n        ),\r\n\r\n        # TF publisher for base_link \u2192 camera transformation\r\n        Node(\r\n            package='tf2_ros',\r\n            executable='static_transform_publisher',\r\n            arguments=['0', '0', '0.1', '0', '0', '0', 'base_link', f'{camera_namespace}_link'],\r\n            output='screen'\r\n        ),\r\n    ])\n"})}),"\n",(0,s.jsx)(e.h3,{id:"launch-vslam",children:"Launch VSLAM"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# Terminal 1: Launch VSLAM\r\nsource /opt/ros/humble/setup.bash\r\nros2 launch ~/ros2_ws/launch/visual_slam.launch.py\r\n\r\n# Terminal 2: Monitor SLAM status\r\nros2 topic echo /visual_slam/status\r\n\r\n# Terminal 3: View odometry\r\nros2 topic echo /visual_slam/odometry\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"part-4-nav2-navigation-stack",children:"Part 4: Nav2 Navigation Stack"}),"\n",(0,s.jsx)(e.h3,{id:"nav2-configuration",children:"Nav2 Configuration"}),"\n",(0,s.jsxs)(e.p,{children:["Create ",(0,s.jsx)(e.code,{children:"~/ros2_ws/config/nav2_params.yaml"}),":"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:'amcl:\r\n  ros__parameters:\r\n    use_sim_time: False\r\n    alpha1: 0.2      # Rotation noise from rotation\r\n    alpha2: 0.2      # Rotation noise from translation\r\n    alpha3: 0.2      # Translation noise from translation\r\n    alpha4: 0.2      # Translation noise from rotation\r\n    z_max: 4.0\r\n    z_min: 0.05\r\n    z_rand: 0.05\r\n    scan_matching_uncertainty: 0.1\r\n\r\nbt_navigator:\r\n  ros__parameters:\r\n    use_sim_time: False\r\n    global_frame: map\r\n    robot_base_frame: base_link\r\n    odom_topic: /visual_slam/odometry\r\n    bt_xml_filename: "navigate_w_replanning_and_recovery.xml"\r\n    default_nav_to_pose_bt_xml: "navigate_to_pose.xml"\r\n    plugin_lib_names:\r\n      - nav2_compute_path_to_pose_action_bt_node\r\n      - nav2_compute_path_through_poses_action_bt_node\r\n      - nav2_follow_path_action_bt_node\r\n      - nav2_spin_action_bt_node\r\n      - nav2_wait_action_bt_node\r\n      - nav2_assisted_teleop_action_bt_node\r\n      - nav2_back_up_action_bt_node\r\n      - nav2_drive_on_heading_bt_node\r\n      - nav2_clear_costmap_service_bt_node\r\n      - nav2_is_stopped_condition_bt_node\r\n      - nav2_goal_updated_condition_bt_node\r\n      - nav2_initial_pose_received_condition_bt_node\r\n      - nav2_reinitialize_global_localization_service_bt_node\r\n      - nav2_rate_controller_bt_node\r\n      - nav2_distance_controller_bt_node\r\n      - nav2_speed_controller_bt_node\r\n      - nav2_truncate_path_action_bt_node\r\n      - nav2_truncate_path_local_action_bt_node\r\n      - nav2_goal_checker_selector_bt_node\r\n      - nav2_controller_selector_bt_node\r\n      - nav2_goal_updater_node_bt_node\r\n      - nav2_would_a_loop_be_formed_condition_bt_node\r\n      - nav2_if_led_bt_node\r\n      - nav2_sleep_bt_node\r\n      - nav2_wait_uptime_bt_node\r\n\r\ncontroller_server:\r\n  ros__parameters:\r\n    use_sim_time: False\r\n    controller_frequency: 10.0  # Lower for Jetson\r\n    min_x_velocity_threshold: 0.001\r\n    min_y_velocity_threshold: 0.5\r\n    min_theta_velocity_threshold: 0.001\r\n    failure_tolerance: 0.3\r\n    progress_checker_plugin: "progress_checker"\r\n    goal_checker_plugins: ["general_goal_checker"]\r\n    controller_plugins: ["FollowPath"]\r\n\r\n    # Progress checker\r\n    progress_checker:\r\n      plugin: "nav2_controller::SimpleProgressChecker"\r\n      required_movement_radius: 0.5\r\n      movement_time_allowance: 10.0\r\n\r\n    # Goal checker\r\n    general_goal_checker:\r\n      stateful: True\r\n      plugin: "nav2_controller::SimpleGoalChecker"\r\n      xy_goal_tolerance: 0.25\r\n      yaw_goal_tolerance: 0.25\r\n      stateful: true\r\n\r\n    # DWA (Dynamic Window Approach) local planner\r\n    FollowPath:\r\n      plugin: "nav2_regulated_pure_pursuit_controller::RegulatedPurePursuitController"\r\n      desired_linear_vel: 0.5    # m/s\r\n      lookahead_dist: 0.6        # meters\r\n      min_approach_linear_vel: -0.05\r\n      approach_velocity_scaling_dist: 1.0\r\n      max_allowed_time_error: 1.0\r\n      use_velocity_scaled_lookahead_dist: false\r\n      min_lookahead_dist: 0.3\r\n      max_lookahead_dist: 0.9\r\n      lookahead_time: 1.5\r\n      use_approach_linear_velocity_scaling: true\r\n      max_allowed_time_error: 1.0\r\n      use_regulated_linear_velocity_scaling: true\r\n      use_cost_regulated_linear_velocity_scaling: false\r\n      regulated_linear_scaling_min_radius: 0.9\r\n      regulated_linear_scaling_min_speed: 0.25\r\n      use_rotate_to_heading: true\r\n      rotate_to_heading_min_angle: 0.785\r\n      max_angular_accel: 3.2\r\n      max_robot_pose_search_dist: 2.0\r\n      cost_scaling_dist: 0.6\r\n      cost_scaling_gain: 1.0\r\n      inflation_cost_scaling_gain: 3.0\r\n\r\nplanner_server:\r\n  ros__parameters:\r\n    expected_planner_frequency: 20.0\r\n    use_sim_time: False\r\n    planner_plugins: ["GridBased"]\r\n    GridBased:\r\n      plugin: "nav2_navfn_planner::NavfnPlanner"\r\n      tolerance: 0.5\r\n      use_astar: true\r\n      allow_unknown: true\r\n\r\ncostmap_server:\r\n  ros__parameters:\r\n    update_frequency: 5.0  # Lower frequency for Jetson\r\n    publish_frequency: 2.0\r\n    global_frame: map\r\n    robot_base_frame: base_link\r\n    use_sim_time: False\r\n    rolling_window: true\r\n    width: 100\r\n    height: 100\r\n    resolution: 0.05\r\n    robot_radius: 0.22\r\n    plugins: ["static_layer", "obstacle_layer", "inflation_layer"]\r\n    inflation_layer:\r\n      plugin: "nav2_costmap_2d::InflationLayer"\r\n      cost_scaling_factor: 3.0\r\n      inflation_radius: 0.55\r\n    obstacle_layer:\r\n      plugin: "nav2_costmap_2d::ObstacleLayer"\r\n      observation_sources: scan\r\n      scan:\r\n        topic: /scan\r\n        max_obstacle_height: 2.0\r\n        clearing: True\r\n        marking: True\r\n        data_type: "LaserScan"\r\n        raytrace_max_range: 3.0\r\n        raytrace_min_range: 0.0\r\n        obstacle_max_range: 2.5\r\n        obstacle_min_range: 0.0\r\n    static_layer:\r\n      plugin: "nav2_costmap_2d::StaticLayer"\r\n      map_subscribe_transient_local: True\n'})}),"\n",(0,s.jsx)(e.h3,{id:"nav2-launch-file",children:"Nav2 Launch File"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"#!/usr/bin/env python3\r\n\"\"\"\r\nLaunch Nav2 navigation stack\r\n\"\"\"\r\n\r\nimport os\r\nfrom ament_index_python.packages import get_package_share_directory\r\nfrom launch import LaunchDescription\r\nfrom launch_ros.actions import Node\r\n\r\n\r\ndef generate_launch_description():\r\n    nav2_dir = get_package_share_directory('nav2_bringup')\r\n    config_dir = os.path.expanduser('~/ros2_ws/config')\r\n\r\n    return LaunchDescription([\r\n        # Map server\r\n        Node(\r\n            package='nav2_map_server',\r\n            executable='map_server',\r\n            name='map_server',\r\n            output='screen',\r\n            parameters=[{\r\n                'yaml_filename': os.path.join(config_dir, 'occupancy_map.yaml'),\r\n            }]\r\n        ),\r\n\r\n        # Localization (AMCL)\r\n        Node(\r\n            package='nav2_amcl',\r\n            executable='amcl',\r\n            name='amcl',\r\n            output='screen',\r\n            parameters=[os.path.join(config_dir, 'nav2_params.yaml')],\r\n        ),\r\n\r\n        # Path planning\r\n        Node(\r\n            package='nav2_planner',\r\n            executable='planner_server',\r\n            name='planner_server',\r\n            output='screen',\r\n            parameters=[os.path.join(config_dir, 'nav2_params.yaml')],\r\n        ),\r\n\r\n        # Local controller\r\n        Node(\r\n            package='nav2_controller',\r\n            executable='controller_server',\r\n            name='controller_server',\r\n            output='screen',\r\n            parameters=[os.path.join(config_dir, 'nav2_params.yaml')],\r\n        ),\r\n\r\n        # Navigation behavior tree\r\n        Node(\r\n            package='nav2_bt_navigator',\r\n            executable='bt_navigator',\r\n            name='bt_navigator',\r\n            output='screen',\r\n            parameters=[{\r\n                'bt_xml_filename': os.path.join(nav2_dir, 'behavior_trees', 'navigate_w_replanning_and_recovery.xml'),\r\n            }]\r\n        ),\r\n\r\n        # Navigation lifecycle manager\r\n        Node(\r\n            package='nav2_lifecycle_manager',\r\n            executable='lifecycle_manager',\r\n            name='lifecycle_manager_navigation',\r\n            output='screen',\r\n            parameters=[{\r\n                'use_sim_time': False,\r\n                'autostart': True,\r\n                'node_names': ['planner_server', 'controller_server', 'bt_navigator']\r\n            }]\r\n        ),\r\n    ])\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"part-5-end-to-end-vslam--navigation",children:"Part 5: End-to-End VSLAM + Navigation"}),"\n",(0,s.jsx)(e.h3,{id:"complete-system-script",children:"Complete System Script"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'#!/usr/bin/env python3\r\n"""\r\nEnd-to-end VSLAM + Navigation system\r\nIntegrates visual SLAM mapping with autonomous navigation\r\n"""\r\n\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom nav_msgs.msg import OccupancyGrid, Odometry\r\nfrom geometry_msgs.msg import PoseWithCovarianceStamped, PoseStamped\r\nimport math\r\n\r\n\r\nclass SLAMNavigationSystem(Node):\r\n    """Combines SLAM mapping with autonomous navigation"""\r\n\r\n    def __init__(self):\r\n        super().__init__(\'slam_navigation_system\')\r\n\r\n        # Subscribe to SLAM outputs\r\n        self.odometry_sub = self.create_subscription(\r\n            Odometry,\r\n            \'/visual_slam/odometry\',\r\n            self.odometry_callback,\r\n            10\r\n        )\r\n\r\n        self.map_sub = self.create_subscription(\r\n            OccupancyGrid,\r\n            \'/occupancy_grid\',\r\n            self.map_callback,\r\n            10\r\n        )\r\n\r\n        # Publish navigation goals\r\n        self.goal_pub = self.create_publisher(\r\n            PoseStamped,\r\n            \'/goal_pose\',\r\n            10\r\n        )\r\n\r\n        self.current_position = None\r\n        self.current_map = None\r\n\r\n        self.get_logger().info(\'SLAM Navigation System initialized\')\r\n\r\n    def odometry_callback(self, msg):\r\n        """Update current robot position"""\r\n        self.current_position = msg.pose.pose.position\r\n        self.get_logger().debug(\r\n            f\'Robot position: x={self.current_position.x:.2f}, \'\r\n            f\'y={self.current_position.y:.2f}\'\r\n        )\r\n\r\n    def map_callback(self, msg):\r\n        """Update occupancy map"""\r\n        self.current_map = msg\r\n        occupied_cells = sum(1 for cell in msg.data if cell > 50)\r\n        self.get_logger().info(\r\n            f\'Map updated: {msg.info.width}x{msg.info.height}, \'\r\n            f\'{occupied_cells} occupied cells\'\r\n        )\r\n\r\n    def send_navigation_goal(self, goal_x, goal_y, goal_yaw=0.0):\r\n        """Send goal to Nav2 navigation system"""\r\n        goal = PoseStamped()\r\n        goal.header.frame_id = \'map\'\r\n        goal.header.stamp = self.get_clock().now().to_msg()\r\n\r\n        goal.pose.position.x = goal_x\r\n        goal.pose.position.y = goal_y\r\n        goal.pose.position.z = 0.0\r\n\r\n        # Convert yaw to quaternion\r\n        goal.pose.orientation.x = 0.0\r\n        goal.pose.orientation.y = 0.0\r\n        goal.pose.orientation.z = math.sin(goal_yaw / 2)\r\n        goal.pose.orientation.w = math.cos(goal_yaw / 2)\r\n\r\n        self.goal_pub.publish(goal)\r\n        self.get_logger().info(f\'\u2705 Goal sent: ({goal_x:.2f}, {goal_y:.2f})\')\r\n\r\n    def explore_environment(self):\r\n        """Automatically explore environment by sending sequential goals"""\r\n        exploration_sequence = [\r\n            (1.0, 0.0, 0.0),      # Move forward 1m\r\n            (1.0, 1.0, math.pi/4),  # Move diagonal\r\n            (0.0, 1.0, math.pi/2),  # Move left\r\n            (-1.0, 0.0, math.pi),   # Move back\r\n        ]\r\n\r\n        for goal_x, goal_y, goal_yaw in exploration_sequence:\r\n            self.send_navigation_goal(goal_x, goal_y, goal_yaw)\r\n            self.get_logger().info(f\'Exploring: ({goal_x}, {goal_y})\')\r\n\r\n            # Wait for goal completion\r\n            import time\r\n            time.sleep(10)\r\n\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    system = SLAMNavigationSystem()\r\n\r\n    # Run automated exploration\r\n    system.explore_environment()\r\n\r\n    system.destroy_node()\r\n    rclpy.shutdown()\r\n\r\n\r\nif __name__ == \'__main__\':\r\n    main()\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"hands-on-exercise",children:"Hands-On Exercise"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Task"}),": Deploy VSLAM on Jetson, map an indoor environment, and navigate autonomously."]}),"\n",(0,s.jsx)(e.h3,{id:"step-1-launch-vslam",children:"Step 1: Launch VSLAM"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"ros2 launch ~/ros2_ws/launch/visual_slam.launch.py\n"})}),"\n",(0,s.jsx)(e.h3,{id:"step-2-map-environment",children:"Step 2: Map Environment"}),"\n",(0,s.jsx)(e.p,{children:"Walk robot around room for 2-3 minutes while SLAM maps:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Observe RViz showing feature tracking"}),"\n",(0,s.jsx)(e.li,{children:"Watch occupancy grid build"}),"\n",(0,s.jsx)(e.li,{children:"Check loop closure detected"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"step-3-save-map",children:"Step 3: Save Map"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"ros2 service call /map_server/save_map std_srvs/Empty\r\n# Saved to: ~/map.pgm and ~/map.yaml\n"})}),"\n",(0,s.jsx)(e.h3,{id:"step-4-launch-navigation",children:"Step 4: Launch Navigation"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"ros2 launch ~/ros2_ws/launch/nav2_bringup.launch.py map:=~/map.yaml\n"})}),"\n",(0,s.jsx)(e.h3,{id:"step-5-send-navigation-goals",children:"Step 5: Send Navigation Goals"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"python3 ~/slam_navigation_system.py\n"})}),"\n",(0,s.jsx)(e.h3,{id:"exercises",children:"Exercises"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Mapping Accuracy"}),": Compare SLAM map to actual floor plan (measure error)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Loop Closure"}),": Revisit starting position and check loop closure detection"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Autonomous Exploration"}),": Implement frontier-based exploration"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Collision Avoidance"}),": Add obstacles and verify costmap adjustment"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Performance"}),": Profile CPU/memory on Jetson Orin Nano"]}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"common-issues--solutions",children:"Common Issues & Solutions"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"Issue"}),(0,s.jsx)(e.th,{children:"Cause"}),(0,s.jsx)(e.th,{children:"Solution"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"Low feature count"}),(0,s.jsx)(e.td,{children:"Poor lighting"}),(0,s.jsx)(e.td,{children:"Improve illumination or use depth + RGB"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"Loop closure failure"}),(0,s.jsx)(e.td,{children:"Texture-less environment"}),(0,s.jsx)(e.td,{children:"Use visual features from different angles"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"Navigation oscillation"}),(0,s.jsx)(e.td,{children:"Controller gains wrong"}),(0,s.jsx)(e.td,{children:"Tune nav2_params.yaml controller settings"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"Memory full on Jetson"}),(0,s.jsx)(e.td,{children:"Map too large"}),(0,s.jsx)(e.td,{children:"Reduce map resolution or use rolling window"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"SLAM drift"}),(0,s.jsx)(e.td,{children:"Accumulated error"}),(0,s.jsx)(e.td,{children:"Loop closure helps; revisit areas"})]})]})]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,s.jsxs)(e.p,{children:["\u2705 ",(0,s.jsx)(e.strong,{children:"VSLAM = Localization + Mapping"}),": Simultaneous solving of both problems"]}),"\n",(0,s.jsxs)(e.p,{children:["\u2705 ",(0,s.jsx)(e.strong,{children:"Hardware Acceleration"}),": Isaac ROS uses Jetson's Tensor cores for 10x speedup"]}),"\n",(0,s.jsxs)(e.p,{children:["\u2705 ",(0,s.jsx)(e.strong,{children:"Visual Features"}),": ORB features enable real-time, robust tracking"]}),"\n",(0,s.jsxs)(e.p,{children:["\u2705 ",(0,s.jsx)(e.strong,{children:"Loop Closure"}),": Neural networks detect revisited areas to eliminate drift"]}),"\n",(0,s.jsxs)(e.p,{children:["\u2705 ",(0,s.jsx)(e.strong,{children:"Nav2 Integration"}),": Standardized ROS 2 navigation stack with SLAM output"]}),"\n",(0,s.jsxs)(e.p,{children:["\u2705 ",(0,s.jsx)(e.strong,{children:"Edge Deployment"}),": Real-time VSLAM on Jetson Orin Nano (40 TOPS)"]}),"\n",(0,s.jsxs)(e.p,{children:["\u2705 ",(0,s.jsx)(e.strong,{children:"Autonomous Navigation"}),": Combines mapping + planning + control"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Next Lesson"}),": ",(0,s.jsx)(e.a,{href:"/physical-ai-textbook/docs/chapter-3/3-3-computer-vision-isaac-ros",children:"Lesson 3.3: Computer Vision with Isaac ROS"})]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Questions?"})," See ",(0,s.jsx)(e.a,{href:"/physical-ai-textbook/docs/faq",children:"FAQ"})," or ",(0,s.jsx)(e.a,{href:"https://github.com/physical-ai-course/physical-ai-textbook/discussions",children:"GitHub Discussions"})]})]})}function u(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}}}]);